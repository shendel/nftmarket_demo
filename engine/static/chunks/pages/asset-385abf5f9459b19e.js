(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{23192:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/asset",function(){return n(45054)}])},77491:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(26042),s=n(69396),i=n(85893),o=n(66089),r=n.n(o);function c(e){var t=(0,a.Z)({href:!1,isLoading:!1,disabled:!1,width:!1,onClick:function(){}},e),n=t.children,o=t.isLoading,c=t.href,l=t.onClick,d=t.disabled,u=t.width,f={};return c&&(f.href=c),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r(),{id:"5bc0a8af454273c2",children:".css-1tu9cnm.jsx-5bc0a8af454273c2{-webkit-animation:animation-103nb1t 2s linear infinite;-moz-animation:animation-103nb1t 2s linear infinite;-o-animation:animation-103nb1t 2s linear infinite;animation:animation-103nb1t 2s linear infinite;width:1em;height:1em;margin:0 auto;margin-top:4px}@-webkit-keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.css-axmsrp.jsx-5bc0a8af454273c2{stroke-linecap:round;-webkit-animation:animation-1en1lui 1.5s ease-in-out infinite;-moz-animation:animation-1en1lui 1.5s ease-in-out infinite;-o-animation:animation-1en1lui 1.5s ease-in-out infinite;animation:animation-1en1lui 1.5s ease-in-out infinite}@-webkit-keyframes animation-1en1lui{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}@-moz-keyframes animation-1en1lui{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}@-o-keyframes animation-1en1lui{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}@keyframes animation-1en1lui{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}.-button.jsx-5bc0a8af454273c2{height:52px;cursor:pointer;text-align:center}.-button.-disabled.jsx-5bc0a8af454273c2{cursor:not-allowed}.-button.-locked.jsx-5bc0a8af454273c2{cursor:not-allowed;background:#4d4d4d!important}"}),(0,i.jsx)("a",(0,s.Z)((0,a.Z)({},f),{type:"button",style:(0,a.Z)({minWidth:"140px"},u?{width:u,marginLeft:"10px",marginRight:"10px"}:{}),onClick:o||d?function(){}:l,className:"jsx-5bc0a8af454273c2 "+"-button ".concat(o?"-disabled":""," ").concat(d?"-locked":""," connect-button tw-web3button--connect-wallet tw-connect-wallet css-1un3lp3"),children:o?(0,i.jsx)("svg",{viewBox:"0 0 50 50",style:{width:"16px",height:"16px"},className:"jsx-5bc0a8af454273c2 css-1tu9cnm",children:(0,i.jsx)("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:"hsl(246, 6.0%, 9.0%)",strokeWidth:"4",className:"jsx-5bc0a8af454273c2 css-axmsrp"})}):(0,i.jsx)(i.Fragment,{children:n})}))]})}},84095:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(26042),s=n(69396),i=n(85893),o=n(67294);function r(e){var t=e.src,n=e.noLoader,r=(0,o.useState)(!1),c=(r[0],r[1]),l=(0,o.useState)(!1),d=l[0],u=l[1],f=(0,o.useState)(!1),m=(f[0],f[1]),p=(0,o.useState)(0),h=p[0],x=p[1],y=(0,o.useState)(!1),g=y[0],b=y[1],v=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onprogress=function(e){x(Math.round(e.loaded/e.total*100))},t.send(),t.onerror=function(e){console.log(">>>> IMG PRECACHE ERROR",e),b(!0)},m(!0)};(0,o.useEffect)((function(){g&&(console.log(">> DO RELOAD"),b(!1),v(t))}),[g]),(0,o.useEffect)((function(){if(t){v(t);var e=new Image;e.onload=function(){u(!0)},e.src=t,c(e)}}),[t]);var j={};return Object.keys(e).forEach((function(t){"noLoader"!=t&&"loadClass"!=t&&"loadStyle"!=t&&"loadTitle"!=t&&(j[t]=e[t])})),(0,i.jsx)(i.Fragment,{children:d?(0,i.jsx)("img",(0,a.Z)({loading:"lazy"},j)):(0,i.jsx)(i.Fragment,{children:!n&&(0,i.jsx)("div",{className:e.loadClass?e.loadName:"",style:(0,s.Z)((0,a.Z)({},e.loadStyle?e.loadStyle:{}),{display:"flex",textAlign:"center",alignItems:"center"}),children:(0,i.jsxs)("strong",{style:{width:"100%",display:"block"},children:[e.loadTitle&&(0,i.jsxs)(i.Fragment,{children:[e.loadTitle," "]}),h,"%"]})})})})}},53419:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var a=n(47568),s=n(29815),i=n(34051),o=n.n(i),r=n(44431),c=function(){var e=(0,a.Z)(o().mark((function e(t,n,a,i,c){var l,d,u,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={from:t,gas:"0"},c&&(d.value=new r.BigNumber(c)),e.next=5,(l=n.methods)[a].apply(l,(0,s.Z)(i)).estimateGas(d);case 5:return u=e.sent,f=new r.BigNumber(new r.BigNumber(u).multipliedBy(1.15).toFixed(0)).toString(16),d.gas="0x"+f,e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,s,i){return e.apply(this,arguments)}}()},36860:function(e,t,n){"use strict";var a=n(47568),s=n(29815),i=n(34051),o=n.n(i),r=n(30750),c=n(53419);t.Z=function(e){return new Promise((function(t,n){var i=e.activeWeb3,l=e.contractAddress,d=e.method,u=e.args,f=e.weiAmount,m=e.onTrx||function(){},p=e.onSuccess||function(){},h=e.onError||function(){},x=e.onFinally||function(){};i.eth.getAccounts().then(function(){var e=(0,a.Z)(o().mark((function e(a){var y,g,b,v,j;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length>0)){e.next=14;break}return g=a[0],b=new i.eth.Contract(r.Mt,l),e.next=6,(0,c.A)(g,b,d,u||[],f);case 6:return v=e.sent,e.next=9,i.eth.getGasPrice();case 9:j=e.sent,v.gasPrice=j,(y=b.methods)[d].apply(y,(0,s.Z)(u||[])).send(v).on("transactionHash",(function(e){console.log("transaction hash:",e),m(e)})).on("error",(function(e){console.log("transaction error:",e),h(e),n(e)})).on("receipt",(function(e){console.log("transaction receipt:",e),p(e)})).then((function(e){t(e),x(e)})).catch((function(e){console.log(">>> CALL MP ERROR",e)})),e.next=15;break;case 14:n("NO_ACTIVE_ACCOUNT");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(">>> callMPMethod",e),n(e)}))}))}},42949:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(47568),s=n(26042),i=n(69396),o=n(34051),r=n.n(o),c=n(12975),l=n(54030),d=n(78899),u=n(3283),f=n.n(u),m=n(99312),p=n(64262),h=n(81586),x=n(42304),y=function(e){var t=(0,s.Z)({forAddress:!1},e),n=t.address,a=t.forAddress,o=t.chainId;return new Promise((function(e,t){var r=(0,p.T_)(o),c=d;if(r&&r.rpcUrls)try{var l=new(new(f())(r.rpcUrls[0]).eth.Contract)(m,p.Ce[o]),u=new h.vU(c);(0,x.O)({multicall:l,target:n,encoder:u,calls:(0,i.Z)((0,s.Z)({owner:{func:"owner"}},a?{balance:{func:"balanceOf",args:[a]}}:{}),{totalSupply:{func:"totalSupply",_isBigNumber:!0},maxSupply:{func:"MAX_SUPPLY",_isBigNumber:!0},name:{func:"name"},contractURI:{func:"contractURI "},hiddenMetadataUri:{func:"hiddenMetadataUri"},baseExtension:{func:"baseExtension"},zeroTokenURI:{func:"tokenURI",args:[0]},symbol:{func:"symbol"}})}).then((function(t){e(t)})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),t(e)}))}catch(y){t(y)}else t("NOT_SUPPORTED_CHAIN")}))},g=function(e){var t=(0,s.Z)({forAddress:!1},e),n=t.address,o=t.chainId,d=t.forAddress;return new Promise((function(e,t){y({chainId:o,address:n,forAddress:d}).then(function(){var t=(0,a.Z)(r().mark((function t(n){var a,o,d,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!1,o=!1,d=!1,!n.contractURI){t.next=12;break}return t.prev=4,t.next=7,(0,l.L)((0,c.W)(n.contractURI));case 7:a=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:if(!n.zeroTokenURI){t.next=21;break}return t.prev=13,t.next=16,(0,l.L)((0,c.W)(n.zeroTokenURI));case 16:o=t.sent,t.next=21;break;case 19:t.prev=19,t.t1=t.catch(13);case 21:if(a||o||!n.baseExtension||!n.hiddenMetadataUri){t.next=30;break}return t.prev=22,t.next=25,(0,l.L)((0,c.W)("".concat(n.hiddenMetadataUri,1).concat(n.baseExtension)));case 25:d=t.sent,t.next=30;break;case 28:t.prev=28,t.t2=t.catch(22);case 30:u=(0,i.Z)((0,s.Z)({},n),{name:(null===a||void 0===a?void 0:a.name)||(null===o||void 0===o?void 0:o.name)||n.symbol||"-",description:(null===a||void 0===a?void 0:a.description)||(null===o||void 0===o?void 0:o.description)||n.name||"-",image:(null===a||void 0===a?void 0:a.image)||(null===o||void 0===o?void 0:o.image)||(null===d||void 0===d?void 0:d.image)||!1,totalSupply:(null===n||void 0===n?void 0:n.totalSupply)||0}),e(u);case 32:case"end":return t.stop()}}),t,null,[[4,10],[13,19],[22,28]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(">>> Fail fetchNFTCollectionMeta >>",e),t(e)}))}))}},54030:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var a=n(83300),s=n.n(a),i=n(12975),o=function(e){return new Promise((function(t,n){s()((0,i.W)(e)).then((function(e){return e.text()})).then((function(e){try{return JSON.parse(e.slice(1))}catch(t){try{return JSON.parse(e)}catch(a){n(a)}}})).then((function(e){e&&e.image&&(e.image=(0,i.W)(e.image)),t(e)})).catch((function(e){n(e)}))}))}},45054:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ne}});var a=n(26042),s=n(828),i=n(85893),o=n(66089),r=n.n(o),c=n(11163),l=n(67294),d=n(54153),u=n(64708),f=n(19902),m=n(33052),p=n(12975),h=n(5329),x=n(54030),y=n(3283),g=n.n(y),b=n(99312),v=n(64262),j=n(81586),w=n(26566),k=n(42304),T=function(e){var t=e.address,n=e.chainId,a=e.ids;return new Promise((function(e,s){var i=(0,v.T_)(n);if(i&&i.rpcUrls)try{var o=new(new(g())(i.rpcUrls[0]).eth.Contract)(b,v.Ce[n]),r=new j.vU(w),c={baseExtension:{func:"baseExtension"}};a.forEach((function(e){c[e]={func:"tokenURI",args:[e]}})),(0,k.O)({multicall:o,target:t,encoder:r,calls:c}).then((function(t){var n={};Object.keys(t).forEach((function(e){"baseExtension"!==e&&(t.baseExtension&&t[e].substr(-t.baseExtension.length)!=t.baseExtension?n[e]="".concat(t[e]).concat(e).concat(t.baseExtension):n[e]=t[e])})),e(n)})).catch((function(e){console.log(">>> Fail fetch all info",e),s(e)}))}catch(l){console.log(">>> err",l),s(l)}else s("NOT_SUPPORTED_CHAIN")}))},N=n(42949),S=n(30750),_=function(e){var t=(0,a.Z)({},e),n=t.marketAddress,s=t.chainId,i=t.collectionAddress,o=t.tokenId;return new Promise((function(e,t){var a=(0,v.T_)(s),r=S.Mt;if(a&&a.rpcUrls)try{var c=new(new(g())(a.rpcUrls[0]).eth.Contract)(b,v.Ce[s]),l=new j.vU(r);(0,k.O)({multicall:c,target:n,encoder:l,calls:{tokensAtSale:{func:"getTokensAtSale",args:[0,0]},allowedERC20:{func:"getAllowedERC20"}}}).then((function(t){var n=!1;(null===t||void 0===t?void 0:t.tokensAtSale)&&Object.keys(t.tokensAtSale).forEach((function(e){if(t.tokensAtSale[e].tokenId.toString()===o.toString()&&t.tokensAtSale[e].collection.toString().toLowerCase()===i.toString().toLowerCase())return n=t.tokensAtSale[e],!1})),e({tokenInfo:n,allowedERC20:t.allowedERC20})})).catch((function(e){console.log(">>> Fail fetch all info",e),t(e)}))}catch(d){t(d)}else t("NOT_SUPPORTED_CHAIN")}))},C=function(e){var t=(0,a.Z)({},e),n=t.marketAddress,s=t.chainId,i=t.offerId;return new Promise((function(e,t){var a=(0,v.T_)(s),o=S.Mt;if(a&&a.rpcUrls)try{new(new(g())(a.rpcUrls[0]).eth.Contract)(o,n).methods._auctionListedNfts(i).call().then((function(t){e(t)})).catch((function(e){t(e)}))}catch(r){t(r)}else t("NOT_SUPPORTED_CHAIN")}))},I=n(13533),Z=function(e){var t=e.chainId,n=e.collection,a=e.tokenId;return new Promise((function(e,s){var i=(0,v.T_)(t);if(i&&i.rpcUrls)try{new(new(g())(i.rpcUrls[0]).eth.Contract)(w,n).methods.ownerOf(a).call().then((function(t){e(t)})).catch((function(e){s(e)}))}catch(o){s(o)}else s("NOT_SUPPORTED_CHAIN")}))};function F(e){var t=e.address,n=e.label,a=t?"".concat(t.substr(0,8),"...").concat(t.substr(-4,4)):"...",s=t?t.substr(2,6):"D194B9",o=t?t.substr(-6,6):"52D29D";return(0,i.jsxs)("div",{className:"flex items-center mb-2 mt-6 gap-2 transition-opacity duration-200 ease-in-out mx-4",children:[(0,i.jsx)("div",{className:"mt-4 w-[48px] h-[48px] rounded-[50%] opacity-90 border-2 border-white border-opacity-20",style:{background:"linear-gradient(45deg, #".concat(s,", #").concat(o,")")}}),(0,i.jsx)("div",{className:"m-0 p-0 ml-[6px] flex flex-col h-full mt-4",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-white opacity-60 mt-1 p-[2px]",children:n}),(0,i.jsx)("p",{className:"font-semibold m-0 text-white text-opacity-90",children:a})]})})]})}var A=n(69396),E=n(29223),L=n(36860),M=n(44431),O=n.n(M),U=n(47568),P=n(29815),R=n(34051),W=n.n(R),B=n(64914),D=n.n(B),z=n(53419),G=function(e){return new Promise((function(t,n){var a=e.activeWeb3,s=(e.chainId,e.tokenAddress),i=e.approveFor,o=e.weiAmount,r=e.onTrx||function(){},c=e.onSuccess||function(){},l=e.onError||function(){},d=e.onFinally||function(){};a.eth.getAccounts().then(function(){var e=(0,U.Z)(W().mark((function e(u){var f,m,p,h;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.length>0)){e.next=10;break}return m=u[0],p=new a.eth.Contract(D(),s),e.next=6,(0,z.A)(m,p,"approve",[i,o]);case 6:h=e.sent,(f=p.methods).approve.apply(f,(0,P.Z)([i,o])).send(h).on("transactionHash",(function(e){r(e)})).on("error",(function(e){l(e),n(e)})).on("receipt",(function(e){c(e)})).then((function(e){t(e),d(e)})),e.next=11;break;case 10:n("NO_ACTIVE_ACCOUNT");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(">>> approveToken",e),n(e)}))}))},X=n(77491);function H(e){var t=(0,a.Z)({onBuy:function(){}},e),n=t.chainId,s=t.marketplaceContract,o=t.marketTokenInfo,r=t.price,c=t.currency,d=t.onBuy,u=(0,E.Z)(n),f=u.isWalletConnecting,m=(u.isConnected,u.isSwitchChain),p=u.address,h=u.activeChainId,x=u.activeWeb3,y=u.connectWeb3,g=u.switchChainId,b=(0,l.useState)(!1),j=(b[0],b[1],(0,l.useState)(!1)),w=j[0],k=j[1],T=(0,l.useState)(!0),N=T[0],S=T[1],_=(0,l.useState)(!1),C=_[0],Z=_[1],F=function(){Z(!0),(0,L.Z)((0,A.Z)((0,a.Z)({activeWeb3:x,contractAddress:s,method:"buyNFT"},o.erc20==v.r_?{weiAmount:o.price.toString()}:{}),{args:[o.collection,o.tokenId.toString()],onTrx:function(e){console.log(">> onTrx",e),"Buy NFT TX ".concat(e)},onSuccess:function(e){},onError:function(e){console.log(">> onError",e),"Fail buy NFT. ".concat(e.message?e.message:""),Z(!1)},onFinally:function(e){Z(!1),d()}}))},M=(0,l.useState)(!1),U=M[0],P=M[1];(0,l.useEffect)((function(){p&&(o.erc20!=v.r_?(0,I.Z)({erc20list:[o.erc20],chainId:n,withAllowance:{allowanceFrom:p,allowanceTo:s}}).then((function(e){e&&e[o.erc20]&&e[o.erc20].symbol&&(S(new(O())(o.price.toString()).isGreaterThan(e[o.erc20].allowance)),k(!0))})).catch((function(e){k(!0)})):k(!0))}),[p]);var R=(0,v.T_)(n);return(0,i.jsxs)(i.Fragment,{children:[!p&&(0,i.jsx)(X.Z,{onClick:function(){y()},isLoading:f,children:"Connect Wallet"}),p&&(0,i.jsx)(i.Fragment,{children:"".concat(h)!=="".concat(n)?(0,i.jsxs)(X.Z,{onClick:function(){g()},isLoading:m,children:["Switch to ",R.chainName]}):(0,i.jsx)(i.Fragment,{children:o.erc20!==v.r_&&w&&N?(0,i.jsxs)(X.Z,{onClick:function(e){var t=o.erc20,a=o.price;P(!0),G({activeWeb3:x,chainId:n,tokenAddress:t,approveFor:s,weiAmount:a.toString(),onTrx:function(e){"Approving TX hash ".concat(e)},onFinally:function(){P(!1),F()},onError:function(e){P(!1),"Fail approve token. ".concat(e.message?e.message:"")}})},isLoading:U||C,children:["Approve & Buy 1 for ",r," ",c]}):(0,i.jsxs)(X.Z,{onClick:F,isLoading:C,children:["Buy 1 for ",r," ",c]})})})]})}var V=n(4248),Y=function(e){var t=(0,a.Z)({},e),n=t.address,s=t.chainId,i=t.collection,o=t.tokenId,r=t.offerId;return new Promise((function(e,t){var c=(0,v.T_)(s),l=S.Mt;if(c&&c.rpcUrls)try{var d=new(new(g())(c.rpcUrls[0]).eth.Contract)(b,v.Ce[s]),u=new j.vU(l),f=new j.vU(b);(0,k.O)({multicall:d,target:n,encoder:u,calls:{tokenInfo:{func:"marketTokensGet",args:[i,o]},bids:{func:"getOfferBids",args:[r]},timestamp:{func:"getCurrentBlockTimestamp",target:v.Ce[s],encoder:f}}}).then((function(t){e((0,A.Z)((0,a.Z)({chainId:s,address:n,collection:i,tokenId:o,offerId:r},t),{bids:(0,V.Z)(t.bids)}))})).catch((function(e){console.log(">>> Fail fetch market bids",e),t(e)}))}catch(m){t(m)}else t("NOT_SUPPORTED_CHAIN")}))},J=function(e){e=Number(e);var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60);return[t>0?t+(1==t?" day":" days"):"",n>0?n+(1==n?" hour":" hours"):"",a>0?a+(1==a?" minute":" minutes"):"",s>0?s+(1==s?" second":" seconds"):""].join(" ")};function q(e){var t=(0,a.Z)({title:"Time left: ",finishTitle:"Time is out"},e),n=t.title,s=t.finishTitle,o=t.utxNow,r=t.utxEnd,c=(0,l.useState)(Number(o)),d=c[0],u=c[1];(0,l.useEffect)((function(){var e=setInterval((function(){u(d+1)}),1e3);return function(){clearInterval(e)}}));var f=r-d;return(0,i.jsx)("div",{children:f>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)("strong",{children:n})}),(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)("strong",{children:J(f)})})]}):(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)("strong",{children:s})})})}function K(e){var t=(0,a.Z)({onBuy:function(){}},e),n=t.chainId,s=t.marketplaceContract,o=t.marketTokenInfo,r=(t.price,t.currency),c=t.currencyDecimals,d=(t.onBuy,(0,E.Z)(n)),u=d.isWalletConnecting,f=(d.isConnected,d.isSwitchChain),m=d.address,p=d.activeChainId,x=d.activeWeb3,y=d.connectWeb3,g=d.switchChainId,b=(0,l.useState)(!1),j=(b[0],b[1],(0,l.useState)(!1)),w=j[0],k=j[1],T=(0,l.useState)(!0),N=T[0],S=T[1],_=(0,l.useState)(!1),C=_[0],Z=(_[1],(0,l.useState)(!1)),F=Z[0],M=Z[1],U=(0,l.useState)(o),P=U[0],R=U[1],W=(0,l.useState)([]),B=W[0],D=W[1],z=(0,l.useState)(0),H=z[0],V=z[1],J=(0,l.useState)(!1),K=J[0],Q=J[1],$=function(){if(o){var e=o.collection,t=o.tokenId,a=o.offerId;Y({address:s,chainId:n,collection:e,tokenId:t,offerId:a}).then((function(e){var t=e.tokenInfo,n=e.bids,a=e.timestamp;e.highestBidder;t&&t.utx&&"0"!=t.utx&&R(t),V(a),Q(Number(a)>Number(P.endAt)),D(n.sort((function(e,t){return new(O())(e.bid).isGreaterThan(t.bid)?-1:1})))})).catch((function(e){console.log(">> fail fetch bids",e)}))}},ee=(0,l.useState)(!1),te=ee[0],ne=ee[1],ae=(0,l.useState)(!1),se=ae[0],ie=ae[1],oe=(0,l.useState)(!1),re=oe[0],ce=oe[1];(0,l.useEffect)((function(){if(B&&B.length&&m&&P){ne(m.toLowerCase()==B[0].owner.toLowerCase());var e=B.filter((function(e){return e.owner.toLowerCase()==m.toLowerCase()}));e.length?(ie(e[0].bid),ce(new(O())(P.price).minus(e[0].bid).toString())):ce(!1)}else ne(!1),ce(!1)}),[B]),(0,l.useEffect)((function(){var e=setInterval((function(){$()}),5e3);return $(),function(){clearInterval(e)}}),[o]);var le=(0,l.useState)(!1),de=le[0],ue=le[1],fe=function(){ue(!0),(0,L.Z)({activeWeb3:x,contractAddress:s,method:"completeAuction",args:[P.offerId],onTrx:function(e){console.log(">> onTrx",e),"Close auction TX ".concat(e)},onSuccess:function(e){},onError:function(e){console.log(">> onError",e),"Fail close auction. ".concat(e.message?e.message:""),ue(!1)},onFinally:function(e){ue(!1)}}).catch((function(e){console.log(">>> FAIL CLOSE",e),ue(!1)}))},me=(0,l.useState)(!1),pe=me[0],he=me[1],xe=(0,l.useState)(!1),ye=xe[0],ge=xe[1];(0,l.useEffect)((function(){m&&(o.erc20!=v.r_?(0,I.Z)({erc20list:[o.erc20],chainId:n,withAllowance:{allowanceFrom:m,allowanceTo:s}}).then((function(e){e&&e[o.erc20]&&e[o.erc20].symbol&&(S(new(O())(o.price.toString()).isGreaterThan(e[o.erc20].allowance)),k(!0))})).catch((function(e){k(!0)})):k(!0))}),[m]);var be=(0,v.T_)(n);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex flex-col w-full relative grow bg-transparent rounded-2xl overflow-hidden mt-8 mb-6",children:(0,i.jsxs)("div",{className:"p-4 pl-5 rounded-xl bg-white bg-opacity-[0.13] w-full m-0 mb-3",children:[(0,i.jsx)("p",{className:"text-white opacity-60 mt-1 p-[2px]",children:B.length>0?(0,i.jsx)(i.Fragment,{children:"High Bid"}):(0,i.jsx)(i.Fragment,{children:"Start Price"})}),r&&P&&P.price?(0,i.jsxs)("div",{className:"text-[18px] leading-6 font-semibold text-white text-opacity-90 m-0 rounded-lg",children:[(0,h.m)(B.length>0&&new(O())(B[0].bid).isGreaterThan(0)?B[0].bid:P.price,c)," ",r]}):(0,i.jsx)("div",{className:"text-[18px] leading-6 font-semibold text-white text-opacity-90 m-0 rounded-lg",children:(0,i.jsx)("div",{style:{width:"100%",height:"16px",borderRadius:"inherit"},className:"w-full bg-gradient-to-r from-[#333] via-[#555] to-[#333] bg-cover animate-pulse max-h-full min-h-[12px] p-[2px] m-[2px]"})}),(0,i.jsx)("div",{})]})}),!m&&(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)(X.Z,{onClick:function(){y()},isLoading:u,children:"Connect Wallet"})}),m&&(0,i.jsx)(i.Fragment,{children:"".concat(p)!=="".concat(n)?(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsxs)(X.Z,{onClick:function(){g()},isLoading:f,children:["Switch to ",be.chainName]})}):(0,i.jsx)(i.Fragment,{children:"2"==P.status||K?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)("strong",{children:"The auction has ended"})}),"2"!=P.status&&m.toLowerCase()==P.seller.toLowerCase()&&(0,i.jsxs)(i.Fragment,{children:[te?(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)("strong",{children:"Your NFT has been successfully sold."})}):(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)("strong",{children:"Nobody bought your lot"})}),(0,i.jsx)("div",{className:"flex justify-evenly items-center",style:{paddingTop:"1rem"},children:(0,i.jsx)(X.Z,{onClick:fe,isLoading:de,children:te?"Collect funds":"Complete Auction"})})]}),new(O())(se).isGreaterThan(0)&&te&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex justify-evenly items-center",style:{paddingBottom:"1rem"},children:"Congratulations, your bid was the highest"}),(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)(X.Z,{onClick:fe,isLoading:de,children:"Complete Auction"})})]}),new(O())(se).isGreaterThan(0)&&!te&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex justify-evenly items-center",style:{paddingBottom:"1rem"},children:"We are sorry, but your bet did not win"}),(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:new(O())(se).isGreaterThan(0)?(0,i.jsxs)(X.Z,{onClick:function(){he(!0),(0,L.Z)({activeWeb3:x,contractAddress:s,method:"withdrawBid",args:[P.offerId],onTrx:function(e){console.log(">> onTrx",e),"Rufund TX ".concat(e)},onSuccess:function(e){},onError:function(e){console.log(">> onError",e),"Fail refund. ".concat(e.message?e.message:""),he(!1)},onFinally:function(e){he(!1)}}).catch((function(e){console.log(">>> FAIL REFUND",e),he(!1)}))},isLoading:pe,children:["Refund ",(0,h.m)(se,c)," ",r]}):(0,i.jsx)(X.Z,{disabled:!0,children:"Already refunded"})})]})]}):(0,i.jsxs)(i.Fragment,{children:[H&&P&&(0,i.jsx)("div",{className:"flex justify-evenly items-center",style:{paddingBottom:"1rem"},children:(0,i.jsx)(q,{title:"Time left to finish",utxNow:H,utxEnd:P.endAt})}),se&&(0,i.jsx)("div",{className:"flex justify-evenly items-center",style:{paddingBottom:"1rem"},children:(0,i.jsxs)("span",{children:["You bid is: ",(0,i.jsxs)("strong",{children:[(0,h.m)(se,c)," ",r]})]})}),m&&m.toLowerCase()==P.seller.toLowerCase()?(0,i.jsx)("div",{className:"flex justify-evenly items-center",style:{textAlign:"center"},children:(0,i.jsx)("strong",{children:"This is your lot. Wait when auction will be finished"})}):(0,i.jsx)(i.Fragment,{children:te?(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:(0,i.jsx)(X.Z,{disabled:!0,children:"You bid is high"})}):(0,i.jsx)("div",{className:"flex justify-evenly items-center",children:o.erc20!==v.r_&&w&&N?(0,i.jsxs)(X.Z,{onClick:function(e){var t=o.erc20,a=o.price;ge(!0),G({activeWeb3:x,chainId:n,tokenAddress:t,approveFor:s,weiAmount:a.toString(),onTrx:function(e){"Approving TX hash ".concat(e)},onFinally:function(){ge(!1),doBuyLot()},onError:function(e){ge(!1),"Fail approve token. ".concat(e.message?e.message:"")}})},isLoading:ye||C,children:["Approve & Bid ",(0,h.m)(P.price,c)," ",r]}):(0,i.jsx)(X.Z,{onClick:function(){M(!0);var e=re||o.price.toString();(0,L.Z)((0,A.Z)((0,a.Z)({activeWeb3:x,contractAddress:s,method:"bid"},o.erc20==v.r_?{weiAmount:e}:{}),{args:[o.offerId,e],onTrx:function(e){console.log(">> onTrx",e),"Bid NFT TX ".concat(e)},onSuccess:function(e){},onError:function(e){console.log(">> onError",e),"Fail bid NFT. ".concat(e.message?e.message:""),M(!1)},onFinally:function(e){M(!1)}})).catch((function(e){console.log(">>> FAIL BID",e)}))},isLoading:F,children:re?(0,i.jsxs)(i.Fragment,{children:["Bid ",(0,h.m)(P.price,c)," (+",(0,h.m)(re,c),") ",r]}):(0,i.jsxs)(i.Fragment,{children:["Bid ",(0,h.m)(P.price,c)," ",r]})})})})]})})})]})}var Q=n(98765);function $(e){var t=(0,a.Z)({onCancel:function(){},onSell:function(){}},e),n=t.chainId,s=t.marketplaceContract,o=t.tokenId,c=t.collectionAddress,d=t.onCancel,u=t.onSell,f=(0,E.Z)(n),m=f.address,p=(f.isWalletConnecting,f.isConnected,f.isSwitchChain),x=f.activeChainId,y=f.activeWeb3,g=(f.connectWeb3,f.switchChainId),b=(0,v.T_)(n).nativeCurrency,j=(0,l.useState)(!1),k=j[0],T=j[1],N=(0,l.useState)(!1),S=N[0],_=N[1],C=(0,l.useState)({}),Z=C[0],F=C[1],A=(0,l.useState)(!1),M=A[0],P=A[1],R=(0,l.useState)(!1),B=R[0],D=R[1],G=(0,l.useState)(!0),H=G[0],Y=G[1],J=(0,l.useState)(!1),q=J[0],K=J[1];(0,v.T_)(n);(0,l.useEffect)((function(){y&&m&&(Y(!0),function(e){var t=e.activeWeb3,n=e.nftAddress,a=e.operatorAddress;return new Promise((function(e,s){t.eth.getAccounts().then(function(){var i=(0,U.Z)(W().mark((function i(o){var r;return W().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o.length>0?(r=o[0],new t.eth.Contract(w,n).methods.isApprovedForAll(r,a).call().then((function(t){e(t)})).catch((function(e){s(e)}))):s("NO_ACTIVE_ACCOUNT");case 1:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(e){console.log(">>> NftIsApproved",e),s(e)}))}))}({activeWeb3:y,nftAddress:c,ownerAddress:m,operatorAddress:s}).then((function(e){D(e),Y(!1)})).catch((function(e){console.log(">>> Fail check is approved",e),Y(!1)})))}),[y,m]),(0,l.useEffect)((function(){n&&s&&(0,Q.Z)({address:s,chainId:n,onlyInfo:!0}).then((function(e){T(e),ne(e.tradeFee),_(!0)})).catch((function(e){console.log(">>> fail fetch market info",e)}))}),[n,s]),(0,l.useEffect)((function(){k&&(0,I.Z)({erc20list:(0,V.Z)(k.allowedERC20).filter((function(e){return e!==v.r_})),chainId:n}).then((function(e){F(e),P(!0)})).catch((function(e){console.log(">> fail fetch allowedERC20 token info",k.erc20,e)}))}),[k]);var $={600:"test - (10 minutes)",86400:"1 day",604800:"1 week",2678400:"1 mounth",31536e3:"1 year"},ee=(0,l.useState)(0),te=ee[0],ne=ee[1],ae=(0,l.useState)(v.r_),se=ae[0],ie=ae[1],oe=(0,l.useState)(0),re=oe[0],ce=oe[1],le=(0,l.useState)(0),de=le[0],ue=le[1],fe=(0,l.useState)(86400),me=fe[0],pe=fe[1],he=(0,l.useState)(0),xe=he[0],ye=he[1],ge=(0,l.useState)(!1),be=ge[0],ve=ge[1],je=(0,l.useState)(!1),we=je[0],ke=je[1],Te=function(){ke(!0),(0,L.Z)({activeWeb3:y,contractAddress:s,method:"sellNFT",args:[c,o.toString(),(0,h.r)(re,se==v.r_?b.decimals:Z[se].decimals),se,"1"==de,me],onTrx:function(e){console.log(">> onTrx",e),"Placing NFT at Marketplace TX ".concat(e)},onSuccess:function(e){},onError:function(e){console.log(">> onError",e),"Fail place NFT at Marketplace. ".concat(e.message?e.message:""),ke(!1)},onFinally:function(e){ke(!1),u()}}).catch((function(e){console.log(">>> ERR",e),ke(!1)}))};if(!S||!M)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r(),{id:"a0cf8b823803365a",children:".css-1tu9cnm.jsx-a0cf8b823803365a{-webkit-animation:animation-103nb1t 2s linear infinite;-moz-animation:animation-103nb1t 2s linear infinite;-o-animation:animation-103nb1t 2s linear infinite;animation:animation-103nb1t 2s linear infinite;width:1em;height:1em;margin:0 auto;margin-top:4px}@-webkit-keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes animation-103nb1t{100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.css-axmsrp.jsx-a0cf8b823803365a{stroke-linecap:round;-webkit-animation:animation-1en1lui 1.5s ease-in-out infinite;-moz-animation:animation-1en1lui 1.5s ease-in-out infinite;-o-animation:animation-1en1lui 1.5s ease-in-out infinite;animation:animation-1en1lui 1.5s ease-in-out infinite}@-webkit-keyframes animation-1en1lui{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}@-moz-keyframes animation-1en1lui{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}@-o-keyframes animation-1en1lui{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}@keyframes animation-1en1lui{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}"}),(0,i.jsx)("div",{className:"jsx-a0cf8b823803365a flex flex-col w-full relative grow bg-transparent rounded-2xl overflow-hidden mt-8 mb-6",children:(0,i.jsx)("div",{className:"jsx-a0cf8b823803365a p-4 pl-5 rounded-xl bg-white bg-opacity-[0.13] w-full m-0 mb-3",children:(0,i.jsx)("svg",{viewBox:"0 0 50 50",style:{width:"16px",height:"16px"},className:"jsx-a0cf8b823803365a css-1tu9cnm",children:(0,i.jsx)("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:"#FFF",strokeWidth:"4",className:"jsx-a0cf8b823803365a css-axmsrp"})})})})]});var Ne=se==v.r_?b.symbol:Z[se].symbol;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r(),{id:"4fc9773c62a0c2c6",children:"DIV.form.jsx-4fc9773c62a0c2c6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}DIV.form.jsx-4fc9773c62a0c2c6 INPUT.jsx-4fc9773c62a0c2c6{height:2em;width:100%;border:2px solid#606060;padding-left:.5em}DIV.form.jsx-4fc9773c62a0c2c6 INPUT.has-error.jsx-4fc9773c62a0c2c6{border-color:#990101}DIV.form.jsx-4fc9773c62a0c2c6 SELECT.jsx-4fc9773c62a0c2c6{height:2em;max-width:8em;border:2px solid#606060;padding-left:.5em;padding-right:.5em}DIV.form.jsx-4fc9773c62a0c2c6 SELECT.fullWidth.jsx-4fc9773c62a0c2c6{max-width:none;width:100%}"}),(0,i.jsx)("div",{className:"jsx-4fc9773c62a0c2c6 flex flex-col w-full relative grow bg-transparent rounded-2xl overflow-hidden mt-8 mb-6",children:(0,i.jsxs)("div",{className:"jsx-4fc9773c62a0c2c6 p-4 pl-5 rounded-xl bg-white bg-opacity-[0.13] w-full m-0 mb-3",children:[(0,i.jsx)("p",{className:"jsx-4fc9773c62a0c2c6 text-white opacity-60 mt-1 p-[2px]",children:"Type:"}),(0,i.jsx)("div",{className:"jsx-4fc9773c62a0c2c6 form",children:(0,i.jsxs)("select",{value:de,onChange:function(e){ue(e.target.value)},className:"jsx-4fc9773c62a0c2c6 fullWidth",children:[(0,i.jsx)("option",{value:0,className:"jsx-4fc9773c62a0c2c6",children:"Fixed price"}),(0,i.jsx)("option",{value:1,className:"jsx-4fc9773c62a0c2c6",children:"Auction"})]})}),(0,i.jsx)("p",{className:"jsx-4fc9773c62a0c2c6 text-white opacity-60 mt-1 p-[2px]",children:de?"Start Price:":"Price:"}),(0,i.jsxs)("div",{className:"jsx-4fc9773c62a0c2c6 form",children:[(0,i.jsx)("input",{value:re,onChange:function(e){!function(t){ve(!1);try{if(parseFloat(t)<=0)ve(!0);else{var n=(0,h.r)(t,se==v.r_?b.decimals:Z[se].decimals).toString(),a=new(O())(n).dividedBy(100).multipliedBy(te),s=new(O())(n).minus(a);ye((0,h.m)(s.toFixed(),se==v.r_?b.decimals:Z[se].decimals))}}catch(e){ye(!1),ve(!0)}ce(t)}(e.target.value)},type:"number",min:"0",step:"0.001",disabled:H||q||we,className:"jsx-4fc9773c62a0c2c6 "+((be?"has-error":"")||"")}),(0,i.jsxs)("select",{value:se,onChange:function(e){ie(e.target.value)},disabled:H||q||we,className:"jsx-4fc9773c62a0c2c6",children:[(0,i.jsxs)("option",{value:v.r_,className:"jsx-4fc9773c62a0c2c6",children:[b.symbol," (Native)"]}),Object.keys(Z).length>0&&(0,i.jsx)(i.Fragment,{children:Object.keys(Z).map((function(e){return(0,i.jsx)("option",{value:e,className:"jsx-4fc9773c62a0c2c6",children:Z[e].symbol},e)}))})]})]}),"1"==de&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"jsx-4fc9773c62a0c2c6 text-white opacity-60 mt-1 p-[2px]",children:"Auction duration:"}),(0,i.jsx)("div",{className:"jsx-4fc9773c62a0c2c6 form",children:(0,i.jsx)("select",{value:me,onChange:function(e){pe(e.target.value)},className:"jsx-4fc9773c62a0c2c6 fullWidth",children:Object.keys($).map((function(e){return(0,i.jsx)("option",{value:e,className:"jsx-4fc9773c62a0c2c6",children:$[e]},e)}))})})]}),Number(te)>0&&(0,i.jsxs)("div",{className:"jsx-4fc9773c62a0c2c6 info",children:[(0,i.jsxs)("p",{className:"jsx-4fc9773c62a0c2c6 text-white opacity-60 mt-1 p-[2px]",children:["Marketplace fee: ",te,"%"]}),xe>0&&(0,i.jsx)("p",{className:"jsx-4fc9773c62a0c2c6 text-white opacity-60 mt-1 p-[2px]",children:"You are got ".concat(xe," ").concat(Ne)})]})]})}),(0,i.jsxs)("div",{className:"jsx-4fc9773c62a0c2c6 flex justify-evenly items-center",children:["".concat(x)!=="".concat(n)?(0,i.jsx)(X.Z,{onClick:function(){g()},isLoading:p,width:"50%",children:"Switch network"}):(0,i.jsx)(i.Fragment,{children:B?(0,i.jsx)(X.Z,{disabled:!re||be,width:"50%",isLoading:we,onClick:Te,children:"Sell"}):(0,i.jsx)(X.Z,{width:"50%",onClick:function(){re&&(K(!0),function(e){var t=(0,a.Z)({onTrx:function(){},onSuccess:function(){},onError:function(){},onFinally:function(){},isAllow:!0},e),n=t.activeWeb3,s=t.nftAddress,i=t.operatorAddress,o=t.onTrx,r=t.onSuccess,c=t.onError,l=t.onFinally,d=t.isAllow;new Promise((function(e,t){n.eth.getAccounts().then(function(){var a=(0,U.Z)(W().mark((function a(u){var f,m,p,h;return W().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(u.length>0)){a.next=13;break}return f=u[0],m=new n.eth.Contract(w,s),a.next=5,(0,z.A)(f,m,"setApprovalForAll",[i,d],0);case 5:return p=a.sent,a.next=8,n.eth.getGasPrice();case 8:h=a.sent,p.gasPrice=h,m.methods.setApprovalForAll(i,d).send(p).on("transactionHash",(function(e){console.log("transaction hash:",e),o(e)})).on("error",(function(e){console.log("transaction error:",e),c(e),t(e)})).on("receipt",(function(e){console.log("transaction receipt:",e),r(e)})).then((function(t){e(t),l(t)})),a.next=14;break;case 13:t("NO_ACTIVE_ACCOUNT");case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(">>> NftSetApprove",e),t(e)}))}))}({activeWeb3:y,nftAddress:c,operatorAddress:s,onTrx:function(e){console.log(">> onTrx",e),"Approve TX ".concat(e)},onSuccess:function(e){},onError:function(e){console.log(">> onError",e),"Fail approve. ".concat(e.message?e.message:""),K(!1)},onFinally:function(e){K(!1),D(!0),Te()}}))},isLoading:H||q||we,disabled:!re||be,children:"Approve & Sell"})}),(0,i.jsx)(X.Z,{width:"50%",onClick:d,disabled:q||we,children:"Cancel"})]})]})}function ee(e){var t=e.chainId,n=e.marketplaceContract,a=e.collectionAddress,s=e.tokenId,o=e.onDelist,r=(0,E.Z)(t),c=(r.isWalletConnecting,r.isConnected,r.isSwitchChain),d=(r.address,r.activeChainId),u=r.activeWeb3,f=(r.connectWeb3,r.switchChainId),m=(0,l.useState)(!1),p=m[0],h=m[1];return(0,i.jsx)(i.Fragment,{children:"".concat(d)!=="".concat(t)?(0,i.jsx)(X.Z,{onClick:function(){f()},isLoading:c,children:"Switch network for de-listing"}):(0,i.jsx)(X.Z,{onClick:function(){h(!0),(0,L.Z)({activeWeb3:u,contractAddress:n,method:"deSellNFT",args:[a,s.toString()],onTrx:function(e){console.log(">> onTrx",e),"De-Listing NFT from marketplace TX ".concat(e)},onSuccess:function(e){},onError:function(e){console.log(">> onError",e),"Fail De-List NFT. ".concat(e.message?e.message:""),h(!1)},onFinally:function(e){h(!1),o()}})},isLoading:p,children:"De-List this NFT from Marketplace"})})}var te=n(84095),ne=function(e){var t=e.storageData,n=(e.storageData.isBaseConfigReady,e.isOwner,(0,c.useRouter)()),o=((n.asPath.split("#")[1]||"").split("/"),(0,s.Z)((n.asPath.split("#")[1]||"").split("/"),4)),y=o[0],g=o[1],b=o[2],j=o[3],w=(0,l.useState)(y),k=w[0],S=w[1],A=(0,l.useState)(g),L=A[0],M=A[1],O=(0,l.useState)("sell"==b),U=O[0],P=O[1],R=(0,l.useState)("auction"==b),W=R[0],B=R[1],D=(0,l.useState)(j),z=D[0],G=D[1];(0,l.useEffect)((function(){var e=function(e){var t=(0,s.Z)((e.split("#")[1]||"").split("/"),4),n=t[0],a=t[1],i=t[2],o=t[3];S(n),M(a),se(!1),ue(!1),pe(!1),P("sell"==i),B("auction"==i),G(o)};return n.events.on("hashChangeStart",e),function(){n.events.off("hashChangeStart",e)}}),[n.events]);var V=(0,l.useState)(null===t||void 0===t?void 0:t.marketplaceChainId),Y=V[0],J=(V[1],(0,l.useState)(null===t||void 0===t?void 0:t.marketplaceContract)),q=J[0],Q=(J[1],(0,E.Z)(Y).address),ne=(0,l.useState)(!1),ae=ne[0],se=ne[1],ie=(0,l.useState)(!1),oe=ie[0],re=ie[1],ce=function(){_({marketAddress:q,chainId:Y,collectionAddress:k,tokenId:L}).then((function(e){(null===e||void 0===e?void 0:e.tokenInfo)?(se(e.tokenInfo),re(!1)):(console.log(">>> NOT LISTED"),re(!0),W&&z&&(console.log(">>> THIS IS AUCTION HISTORY"),C({marketAddress:q,chainId:Y,offerId:z}).then((function(e){se(e),re(!1)})).catch((function(e){console.log(">>> Fail fetch offer info",e)}))))})).catch((function(e){console.log(">>> Fail fetch market token info",e)}))};(0,l.useEffect)((function(){Y&&L&&k&&q&&ce()}),[k,Y,L,q]);var le=(0,l.useState)("..."),de=le[0],ue=le[1],fe=(0,l.useState)(!1),me=fe[0],pe=fe[1];(0,l.useEffect)((function(){if(ae&&Y)if(ae.erc20===v.r_){var e=(0,v.T_)(Y);ue(e.nativeCurrency),pe(!0)}else(0,I.Z)({erc20list:[ae.erc20],chainId:Y}).then((function(e){e&&e[ae.erc20]&&e[ae.erc20].symbol&&ue(e[ae.erc20]),pe(!0)})).catch((function(e){pe(!0),console.log(">> fail fetch allowedERC20 token info",ae.erc20,e)}))}),[ae,Y]);var he=(0,l.useState)(!1),xe=he[0],ye=he[1];(0,l.useEffect)((function(){k&&Y&&(ye(!1),(0,N.Z)({chainId:Y,address:k}).then((function(e){ye(e)})).catch((function(e){console.log(">>> fail fetch collection info",e)})))}),[k,Y]);var ge=(0,l.useState)(!1),be=ge[0],ve=ge[1],je=(0,l.useState)(!1),we=je[0],ke=je[1],Te=function(){ve(!1),Z({chainId:Y,collection:k,tokenId:L}).then((function(e){ke(e),ve(!0)})).catch((function(e){console.log(">>> Fail fetch token owner",e)}))};(0,l.useEffect)((function(){Te()}),[L,k,Y]);var Ne=(0,l.useState)(!1),Se=Ne[0],_e=Ne[1];(0,l.useEffect)((function(){_e(!(!Q||!we)&&Q.toLowerCase()==we.toLowerCase())}),[Q,we]);var Ce=function(){Te(),ce()},Ie=(0,l.useState)(!1),Ze=Ie[0],Fe=Ie[1];(0,l.useEffect)((function(){k&&L&&Y&&(Fe(!1),Le(!1),T({address:k,chainId:Y,ids:[L]}).then((function(e){e&&e[L]&&Fe(e[L])})).catch((function(e){console.log(">>> fail fetch nft metadata url",e)})))}),[k,L]);var Ae=(0,l.useState)(!1),Ee=Ae[0],Le=Ae[1];(0,l.useEffect)((function(){Ze&&(0,x.L)((0,p.W)(Ze)).then((function(e){Le(e),console.log(e)})).catch((function(e){console.log(">>> fail parse nft json metadata",e,Ze)}))}),[Ze]);return console.log(">>>> marketTokenInfo",ae),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Z,(0,a.Z)({},e)),(0,i.jsx)(r(),{id:d.Z.__hash,children:d.Z}),(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash),children:(0,i.jsx)("article",{className:"jsx-".concat(d.Z.__hash)+" w-full ml-auto mr-auto px-4 md:mt-24 max-w-[1200px]",children:(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" w-full flex flex-col gap-8 mt-4 md:mt-32 tablet:flex-row pb-32 tablet:pb-0",children:[(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" flex flex-col flex-1 w-full mt-8 tablet:mt-0",children:[Ee&&Ee.image&&(0,i.jsx)(te.Z,{load:"lazy",style:{objectFit:"contain",width:"300px",height:"300px"},loadStyle:{width:"300px",height:"300px"},loadTitle:"Loading NFT image:",className:"!w-full !h-full bg-white bg-opacity-[0.04] rounded-2xl",alt:Ee.name||"",src:Ee.image}),(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" px-4",children:[(0,i.jsx)("h3",{className:"jsx-".concat(d.Z.__hash)+" mt-8 mb-[15px] text-[23px] font-medium font-GoodTimes text-moon-gold",children:"Description"}),(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)+" font-medium text-base leading-[25px] opacity-80 font-mono",children:Ee&&Ee.description&&(0,i.jsx)(i.Fragment,{children:Ee.description})}),Ee&&Ee.attributes&&Ee.attributes.length&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{className:"jsx-".concat(d.Z.__hash)+" mt-8 mb-[15px] text-[23px] font-medium font-GoodTimes text-moon-gold",children:"Traits"}),(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" py-3 flex flex-wrap gap-4 md:gap-5 mt-3",children:[Ee.attributes.map((function(e,t){return e&&e.trait_type&&e.value?(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" flex flex-col gap-[6px] rounded-lg bg-slate-900 text-center min-w-[128px] lg:min-w-[142px] min-h-[32px] lg:min-h-[38px] grow-0",children:[(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)+" text-moon-gold opacity-70 px-2 pt-1 pb-[2px] bg-[#030712] font-semibold uppercase tracking-widest text-sm",children:e.trait_type}),(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)+" text-base px-2 pb-2 text-white tracking-wider text-[17px] font-mono capitalize",children:e.value})]},t):null})),(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)})]})]}),Ee&&Ee.properties&&Ee.properties.length&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{className:"jsx-".concat(d.Z.__hash)+" mt-8 mb-[15px] text-[23px] font-medium font-GoodTimes text-moon-gold",children:"Properties"}),(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" py-3 flex flex-wrap gap-4 md:gap-5 mt-3",children:[Ee.properties.map((function(e,t){return e&&e.type&&e.name?(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" flex flex-col gap-[6px] rounded-lg bg-slate-900 text-center min-w-[128px] lg:min-w-[142px] min-h-[32px] lg:min-h-[38px] grow-0",children:[(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)+" text-moon-gold opacity-70 px-2 pt-1 pb-[2px] bg-[#030712] font-semibold uppercase tracking-widest text-sm",children:e.type}),(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)+" text-base px-2 pb-2 text-white tracking-wider text-[17px] font-mono capitalize",children:e.name})]},t):null})),(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)})]})]})]})]}),(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" relative w-full max-w-full top-0 tablet:flex-shrink tablet:sticky tablet:min-w-[370px] tablet:max-w-[450px] tablet:mt-4 tablet:mr-4",children:[(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" flex items-center mb-2",children:(0,i.jsxs)("a",{href:(0,u.Rg)("collection",k),className:"jsx-".concat(d.Z.__hash),children:[xe&&xe.image&&(0,i.jsx)(te.Z,{className:"!w-[36px] !h-[36px] rounded-lg mr-4 ml-3 mb-2",src:(0,p.W)(xe.image),style:{objectFit:"contain",width:"300px",height:"300px"}}),(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)+" truncate w-full mx-4 mt-[5px] opacity-50",children:xe&&xe.name?(0,i.jsx)(i.Fragment,{children:xe.name}):(0,i.jsx)(i.Fragment,{children:"...."})})]})}),(0,i.jsx)("h1",{className:"jsx-".concat(d.Z.__hash)+" font-GoodTimes font-medium text-[32px] break-words mb-2 mx-4 text-moon-white",children:Ee&&Ee.name?(0,i.jsx)(i.Fragment,{children:Ee.name}):(0,i.jsx)(i.Fragment,{children:"..."})}),(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" inline-block",children:(0,i.jsxs)("p",{className:"jsx-".concat(d.Z.__hash)+" font-medium truncate mx-4 mt-4 text-[20px] py-1 px-[10px] rounded-sm bg-moon-secondary bg-opacity-40",children:["Token ID #",L]})}),oe&&(0,i.jsxs)(i.Fragment,{children:[!Se&&be&&(0,i.jsx)(F,{label:"NFT Owner",address:we}),!Se||!(Se&&U)&&(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" flex flex-col w-full relative grow bg-transparent rounded-2xl overflow-hidden mt-8 mb-6",children:(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" p-4 pl-5 rounded-xl bg-white bg-opacity-[0.13] w-full m-0 mb-3",children:(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)+" text-white opacity-60 mt-1 p-[2px]",children:"NFT not listening at marketplace"})})}),Se&&(0,i.jsxs)(i.Fragment,{children:[!U&&(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" flex justify-evenly items-center",children:(0,i.jsx)(X.Z,{onClick:function(){P(!U)},children:"Sell this NFT token"})}),U&&(0,i.jsx)($,{marketplaceContract:q,chainId:Y,tokenId:L,collectionAddress:k,onSell:function(){P(!1),Ce()},onCancel:function(){P(!1)}})]})]}),!oe&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F,{label:"Seller",address:null===ae||void 0===ae?void 0:ae.seller}),!(null===ae||void 0===ae?void 0:ae.isBitable)&&(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" flex flex-col w-full relative grow bg-transparent rounded-2xl overflow-hidden mt-8 mb-6",children:(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" p-4 pl-5 rounded-xl bg-white bg-opacity-[0.13] w-full m-0 mb-3",children:[(0,i.jsx)("p",{className:"jsx-".concat(d.Z.__hash)+" text-white opacity-60 mt-1 p-[2px]",children:"Price"}),me&&de&&ae&&ae.price?(0,i.jsxs)("div",{className:"jsx-".concat(d.Z.__hash)+" text-[18px] leading-6 font-semibold text-white text-opacity-90 m-0 rounded-lg",children:[(0,h.m)(ae.price,de.decimals)," ",de.symbol]}):(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" text-[18px] leading-6 font-semibold text-white text-opacity-90 m-0 rounded-lg",children:(0,i.jsx)("div",{style:{width:"100%",height:"16px",borderRadius:"inherit"},className:"jsx-".concat(d.Z.__hash)+" w-full bg-gradient-to-r from-[#333] via-[#555] to-[#333] bg-cover animate-pulse max-h-full min-h-[12px] p-[2px] m-[2px]"})}),(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)})]})}),ae&&Q&&ae.seller.toLowerCase()==Q.toLowerCase()&&(0,i.jsx)(i.Fragment,{children:ae.isBitable?(0,i.jsx)(K,{chainId:Y,marketplaceContract:q,marketTokenInfo:ae,price:(0,h.m)(ae.price,de.decimals),onBuy:Ce,currencyDecimals:de.decimals,currency:de.symbol}):(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" flex justify-evenly items-center",children:(0,i.jsx)(ee,{chainId:Y,marketplaceContract:q,collectionAddress:k,tokenId:L,onDelist:Ce})})}),me&&de&&ae&&(!Q||ae.seller.toLowerCase()!==Q.toLowerCase())&&ae.price&&(0,i.jsx)(i.Fragment,{children:ae.isBitable?(0,i.jsx)(K,{chainId:Y,marketplaceContract:q,marketTokenInfo:ae,price:(0,h.m)(ae.price,de.decimals),onBuy:Ce,currencyDecimals:de.decimals,currency:de.symbol}):(0,i.jsx)("div",{className:"jsx-".concat(d.Z.__hash)+" flex justify-evenly items-center",children:(0,i.jsx)(H,{chainId:Y,marketplaceContract:q,marketTokenInfo:ae,price:(0,h.m)(ae.price,de.decimals),onBuy:Ce,currency:de.symbol})})})]})]})]})})}),(0,i.jsx)(m.Z,(0,a.Z)({},e))]})}},26566:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"string","name":"tokenURI","type":"string"}],"name":"mintNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseExtension","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},78899:function(e){"use strict";e.exports=JSON.parse('[{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"","internalType":"address"}],"name":"owner","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"totalSupply","inputs":[]},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"contractURI","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"tokenURI","inputs":[{"type":"uint256","name":"_tokenId","internalType":"uint256"}]},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseExtension","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hiddenMetadataUri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')}},function(e){e.O(0,[976,697,991,861,100,303,774,888,179],(function(){return t=23192,e(e.s=t);var t}));var t=e.O();_N_E=t}]);