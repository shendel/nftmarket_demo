(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{26377:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collection",function(){return t(58630)}])},42949:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var a=t(47568),c=t(26042),s=t(69396),o=t(34051),l=t.n(o),i=t(12975),r=t(54030),d=t(78899),x=t(3283),h=t.n(x),u=t(99312),f=t(64262),p=t(81586),m=t(42304),g=function(e){var n=(0,c.Z)({forAddress:!1},e),t=n.address,a=n.forAddress,o=n.chainId;return new Promise((function(e,n){var l=(0,f.T_)(o),i=d;if(l&&l.rpcUrls)try{var r=new(new(h())(l.rpcUrls[0]).eth.Contract)(u,f.Ce[o]),x=new p.vU(i);(0,m.O)({multicall:r,target:t,encoder:x,calls:(0,s.Z)((0,c.Z)({owner:{func:"owner"}},a?{balance:{func:"balanceOf",args:[a]}}:{}),{totalSupply:{func:"totalSupply",_isBigNumber:!0},maxSupply:{func:"MAX_SUPPLY",_isBigNumber:!0},name:{func:"name"},contractURI:{func:"contractURI "},hiddenMetadataUri:{func:"hiddenMetadataUri"},baseExtension:{func:"baseExtension"},zeroTokenURI:{func:"tokenURI",args:[0]},symbol:{func:"symbol"}})}).then((function(n){e(n)})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),n(e)}))}catch(g){n(g)}else n("NOT_SUPPORTED_CHAIN")}))},j=function(e){var n=(0,c.Z)({forAddress:!1},e),t=n.address,o=n.chainId,d=n.forAddress;return new Promise((function(e,n){g({chainId:o,address:t,forAddress:d}).then(function(){var n=(0,a.Z)(l().mark((function n(t){var a,o,d,x;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=!1,o=!1,d=!1,!t.contractURI){n.next=12;break}return n.prev=4,n.next=7,(0,r.L)((0,i.W)(t.contractURI));case 7:a=n.sent,n.next=12;break;case 10:n.prev=10,n.t0=n.catch(4);case 12:if(!t.zeroTokenURI){n.next=21;break}return n.prev=13,n.next=16,(0,r.L)((0,i.W)(t.zeroTokenURI));case 16:o=n.sent,n.next=21;break;case 19:n.prev=19,n.t1=n.catch(13);case 21:if(a||o||!t.baseExtension||!t.hiddenMetadataUri){n.next=30;break}return n.prev=22,n.next=25,(0,r.L)((0,i.W)("".concat(t.hiddenMetadataUri,1).concat(t.baseExtension)));case 25:d=n.sent,n.next=30;break;case 28:n.prev=28,n.t2=n.catch(22);case 30:x=(0,s.Z)((0,c.Z)({},t),{name:(null===a||void 0===a?void 0:a.name)||(null===o||void 0===o?void 0:o.name)||t.symbol||"-",description:(null===a||void 0===a?void 0:a.description)||(null===o||void 0===o?void 0:o.description)||t.name||"-",image:(null===a||void 0===a?void 0:a.image)||(null===o||void 0===o?void 0:o.image)||(null===d||void 0===d?void 0:d.image)||!1,totalSupply:(null===t||void 0===t?void 0:t.totalSupply)||0}),e(x);case 32:case"end":return n.stop()}}),n,null,[[4,10],[13,19],[22,28]])})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(">>> Fail fetchNFTCollectionMeta >>",e),n(e)}))}))}},58630:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var a=t(14924),c=t(26042),s=t(69396),o=t(828),l=t(85893),i=t(66089),r=t.n(i),d=t(11163),x=t(67294),h=t(54153),u=t(19902),f=t(33052),p=t(42949),m=t(98901),g=t(13533),j=t(12975),v=t(4248),_=t(55111),w=t(98765),Z=t(78899),b=t(3283),S=t.n(b),N=t(99312),k=t(64262),I=t(81586),y=t(42304),C=function(e){var n=(0,c.Z)({chunkSize:500,onFetching:function(e,n){}},e),t=n.chainId,a=n.collectionAddress,s=n.chunkSize,l=n.onFetching;return new Promise((function(e,n){var c=(0,k.T_)(t),i=Z;if(c&&c.rpcUrls)try{var r=new(new(S())(c.rpcUrls[0]).eth.Contract)(N,k.Ce[t]),d=new I.vU(i);(0,y.O)({multicall:r,target:a,encoder:d,calls:{totalSupply:{func:"totalSupply"},maxSupply:{func:"MAX_SUPPLY"},maxSupply_2:{func:"maxSupply"},baseExtension:{func:"baseExtension"}}}).then((function(t){var c=0,i=0;t.totalSupply&&(c=t.totalSupply),t.maxSupply_2&&(i=t.maxSupply_2),t.maxSupply&&(i=t.maxSupply);for(var x={},h=1;h<=(c||i);h++)x["".concat(h,"_tokenURI")]={func:"tokenURI",args:[h]},x["".concat(h,"_ownerOf")]={func:"ownerOf",args:[h]};(0,y.O)({multicall:r,target:a,encoder:d,calls:x,chunkSize:s,onFetching:l}).then((function(n){var a={};Object.keys(n).forEach((function(e){if(!1!==n[e]){var c=(0,o.Z)(e.split("_"),2),s=c[0],l=c[1];a[s]=a[s]||{},a[s][l]=n[e],a[s].tokenId=s,t.baseExtension&&"tokenURI"==l&&a[s][l].substr(-t.baseExtension.length)!==t.baseExtension&&(a[s][l]="".concat(a[s][l]).concat(s).concat(t.baseExtension))}})),e(a)})).catch((function(e){n(e),console.log(">>> fetchNFTCollectionAllTokens",e)}))})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),n(e)}))}catch(x){n(x)}else n("NOT_SUPPORTED_CHAIN")}))},E=t(29223),F=t(44423),R=t(71931),U=function(){var e=(0,d.useRouter)(),n=(0,x.useState)(e.asPath.split("#")[1]||""),t=n[0],a=n[1],c=function(e){e&&a(e.split("#")[1])};return(0,x.useEffect)((function(){var n=function(){return c(window.location.hash)},t=function(e){return c(e)};return e.events.on("hashChangeStart",t),window.addEventListener("hashchange",n),window.addEventListener("load",n),function(){e.events.off("hashChangeStart",t),window.removeEventListener("load",n),window.removeEventListener("hashchange",n)}}),[e.asPath,e.events]),t},T=t(77491),A=t(84095),L=function(e){var n=e.storageData,t=(e.storageData.isBaseConfigReady,e.isOwner,(0,d.useRouter)()),i=((t.asPath.split("#")[1]||"").split("/"),(0,o.Z)((t.asPath.split("#")[1]||"").split("/"),2)),Z=i[0],b=i[1],S=(0,x.useState)(Z),N=S[0],I=S[1],y=(0,x.useState)("sell"==b),L=y[0],O=y[1],P=(0,x.useState)("my_listed"==b),M=P[0],D=P[1],z=(0,x.useState)("all"==b),B=z[0],W=z[1],Y=U();(0,x.useEffect)((function(){if(console.log(">>> HASH",Y),Y){var e=(0,o.Z)(Y.split("/"),2),n=e[0],t=e[1];I(n),O("sell"==t),D("my_listed"==t),W("all"==t),en(0)}}),[Y]);var G=(0,x.useState)(null===n||void 0===n?void 0:n.marketplaceChainId),H=G[0],X=(G[1],(0,x.useState)(null===n||void 0===n?void 0:n.marketplaceContract)),K=X[0],V=(X[1],(0,E.Z)(H)),q=(V.isWalletConnecting,V.isConnected,V.address),J=(V.activeChainId,V.activeWeb3,V.connectWeb3,V.switchChainId,(0,x.useState)(!1)),Q=J[0],$=J[1];(0,x.useEffect)((function(){N&&H&&($(!1),(0,p.Z)({chainId:H,address:N,forAddress:q}).then((function(e){$(e),console.log(">>> _collectionInfo",e)})).catch((function(e){console.log(">>> fail fetch collection info",e)})))}),[N,H,q]);var ee=(0,x.useState)(!1),ne=ee[0],te=ee[1],ae=(0,x.useState)(!1),ce=(ae[0],ae[1]),se=(0,x.useState)([]),oe=se[0],le=se[1],ie=(0,x.useState)(!0),re=ie[0],de=ie[1],xe=(0,x.useState)([]),he=xe[0],ue=xe[1],fe=(0,x.useState)([]),pe=fe[0],me=fe[1],ge=(0,x.useState)(!1),je=ge[0],ve=ge[1],_e=(0,x.useState)(!1),we=_e[0],Ze=_e[1],be=(0,x.useState)(0),Se=be[0],Ne=be[1],ke=(0,x.useState)(0),Ie=ke[0],ye=ke[1];(0,x.useEffect)((function(){B&&N&&H&&(ve(!1),Ze(!0),C({chainId:H,collectionAddress:N,onFetching:function(e,n){Ne(e),ye(n)}}).then((function(e){me((0,v.Z)(e)),ve(!0),Ze(!1)})).catch((function(e){Ze(!1),console.log(">>> fetchNFTCollectionAllTokens",e)})))}),[B]),(0,x.useEffect)((function(){H&&K&&(de(!0),(0,w.Z)({address:K,chainId:H,collectionAddress:N,forAddress:q}).then((function(e){console.log(">>> MARKET INFO",e),te(e),le(e.tokensAtSale),de(!1),ce(!0)})).catch((function(e){console.log(">>> fail fetch market info",e)})))}),[H,K,N,q,M]);var Ce=(0,x.useState)(!1),Ee=Ce[0],Fe=Ce[1];(0,x.useEffect)((function(){ne&&(console.log(">>> marketInfo.allowedERC20",ne.allowedERC20),(0,g.Z)({erc20list:(0,v.Z)(ne.allowedERC20).filter((function(e){return e!==k.r_})),chainId:H}).then((function(e){console.log(">>>> INFO ERC20",e,ne.allowedERC20),Fe(e)})).catch((function(e){console.log(">> fail fetch allowedERC20 token info",e)})))}),[ne]);var Re=(0,x.useState)({}),Ue=Re[0],Te=Re[1];(0,x.useEffect)((function(){ne&&Q&&(!function(e){var n={chainId:ne.chainId,tokensInfo:e.map((function(e){return{address:e.collection,tokenId:e.tokenId}}))};(0,m.Z)(n).then((function(e){Te((function(n){return Object.keys(e).forEach((function(t){if(!1!==e[t]){var l=(0,o.Z)(t.split("_"),2),i=l[0],r=l[1];n=(0,s.Z)((0,c.Z)({},n),(0,a.Z)({},i,(0,s.Z)((0,c.Z)({},n[i]),(0,a.Z)({},r,e[t].tokenURI))))}})),n}))})).catch((function(e){console.log(">> err",e)}))}(oe),q&&ue(oe.filter((function(e){return e.seller.toLowerCase()==q.toLowerCase()}))))}),[ne,Q,q,oe]);var Ae=(0,x.useState)([]),Le=Ae[0],Oe=Ae[1],Pe=(0,x.useState)(!1),Me=Pe[0],De=Pe[1],ze=(0,x.useState)(!1),Be=ze[0],We=ze[1],Ye=(0,x.useState)(0),Ge=Ye[0],He=Ye[1],Xe=(0,x.useState)(0),Ke=Xe[0],Ve=Xe[1];(0,x.useEffect)((function(){H&&N&&q&&Q&&(De(!1),We(!0),C({chainId:H,collectionAddress:N,chunkSize:200,userAddress:q,onFetching:function(e,n){He(e),Ve(n)}}).then((function(e){var n=(0,v.Z)(e).filter((function(e){return e&&e.ownerOf.toLowerCase()==q.toLowerCase()}));Oe(n),De(!0),We(!1)})).catch((function(e){Ze(!1),console.log(">>> fetchNFTCollectionAllTokens",e)})))}),[H,N,Q,q]);var qe=function(e){return(0,l.jsx)("h2",{className:"font-GoodTimes tracking-wide flex items-center text-3xl lg:text-4xl bg-clip-text text-transparent bg-gradient-to-br from-moon-gold to-indigo-100",style:{marginTop:"2em",textAlign:"center"},children:e})},Je=function(e){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r(),{id:"9a61d30659bd4c87",children:".loader.jsx-9a61d30659bd4c87{padding-top:2em;padding-boolean:2em;text-align:center}.loader.jsx-9a61d30659bd4c87 IMG.jsx-9a61d30659bd4c87{display:block;margin:0 auto;width:6em}.loader.jsx-9a61d30659bd4c87 STRONG.jsx-9a61d30659bd4c87{display:block}"}),(0,l.jsxs)("div",{className:"jsx-9a61d30659bd4c87 loader",children:[(0,l.jsx)("img",{src:(0,R.V)("images/loader.svg","loader"),className:"jsx-9a61d30659bd4c87"}),(0,l.jsx)("strong",{className:"jsx-9a61d30659bd4c87",children:e})]})]})},Qe=(0,x.useState)(0),$e=Qe[0],en=Qe[1],nn=15,tn=!1;return M&&q&&$e+nn<he.length&&(tn=!0),Me&&L&&q&&$e+nn<Le.length&&(tn=!0),re||M&&q||L&&q||B||!($e+nn<oe.length)||(tn=!0),B&&!we&&$e+nn<pe.length&&(tn=!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,(0,c.Z)({},e)),(0,l.jsx)(r(),{id:h.Z.__hash,children:h.Z}),(0,l.jsxs)("main",{className:"jsx-".concat(h.Z.__hash)+" px-6 pt-10 md:pt-12 lg:pt-16 flex flex-col items-center w-full",children:[Q&&(0,l.jsxs)("div",{className:"jsx-".concat(h.Z.__hash)+" flex flex-col items-center md:flex-row md:items-start md:gap-12 lg:gap-16 xl:gap-20",children:[(0,l.jsx)("div",{className:"jsx-".concat(h.Z.__hash),children:Q.image&&(0,l.jsx)(A.Z,{style:{objectFit:"contain",width:"300px",height:"300px"},className:"border-4 p-2 rounded-full object-cover xl:w-[320px] xl:h-[320px]",alt:"".concat(Q.name," thumbnail"),src:(0,j.W)(Q.image)})}),(0,l.jsxs)("div",{className:"jsx-".concat(h.Z.__hash)+" mt-4 md:mt-0 xl:-mt-4",children:[(0,l.jsx)("div",{className:"jsx-".concat(h.Z.__hash)+" mt-8 w-[320px] md:w-[420px] xl:w-[520px] ",children:(0,l.jsx)("h2",{className:"jsx-".concat(h.Z.__hash)+" mt-8 font-GoodTimes text-2xl md:text-3xl xl:text-4xl  bg-clip-text text-transparent bg-gradient-to-b from-indigo-100 via-moon-orange to-moon-secondary",children:Q.name})}),(0,l.jsxs)("div",{className:"jsx-".concat(h.Z.__hash)+" mt-7 xl:mt-9 grid grid-cols-2 gap-3 text-sm xl:text-base w-[320px] xl:w-[400px]",children:[(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(N)),className:"jsx-".concat(h.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(h.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Listed",(0,l.jsx)("span",{className:"jsx-".concat(h.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:ne?ne.collectionListing[N]:0})]})}),q&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(N,"/my_listed")),className:"jsx-".concat(h.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(h.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Your listed",(0,l.jsx)("span",{className:"jsx-".concat(h.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:ne&&ne.userCollectionListed?ne.userCollectionListed[N]:0})]})}),(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(N,"/sell")),className:"jsx-".concat(h.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(h.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Your NFTs",(0,l.jsx)("span",{className:"jsx-".concat(h.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:(null===Q||void 0===Q?void 0:Q.balance)||0})]})})]}),(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(N,"/all")),className:"jsx-".concat(h.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(h.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Supply",(0,l.jsx)("span",{className:"jsx-".concat(h.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:Q.totalSupply||0})]})})]}),(0,l.jsx)("div",{className:"jsx-".concat(h.Z.__hash)+" mt-8 xl:mt-9 max-w-[320px] xl:max-w-[420px]",children:(0,l.jsx)("p",{className:"jsx-".concat(h.Z.__hash)+"  xl:text-base xl:leading-loose text-sm font-light leading-relaxed",children:Q.description})})]})]}),B&&(0,l.jsxs)(l.Fragment,{children:[qe("All NFTs from this collection"),we&&Je("Fetching ".concat(Ie>0?Math.round(Se/Ie*100):0,"%"))]}),M&&q&&(0,l.jsxs)(l.Fragment,{children:[qe("Your listed NFTs from this collection"),re&&Je("Fetching")]}),(!M||!q)&&(!L||!q)&&!B&&(0,l.jsxs)(l.Fragment,{children:[qe("NFTs listed at Marketplace"),re&&Je("Fetching")]}),L&&q&&(0,l.jsxs)(l.Fragment,{children:[qe("Your not listed NFTs"),Be&&Je("Fetching ".concat(Ke>0?Math.round(Ge/Ke*100):0,"%"))]}),(0,l.jsxs)("div",{className:"jsx-".concat(h.Z.__hash)+" mt-20 md:mt-24 flex flex-col gap-10 md:grid md:grid-cols-2 md:grid-flow-row md:gap-12 xl:grid-cols-3 xl:gap-14",children:[B&&(0,l.jsx)(l.Fragment,{children:je&&!we&&(0,l.jsx)(l.Fragment,{children:pe.slice(0,$e+nn).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tokenInfo,n=e.tokenId,t=e.tokenURI,a=arguments.length>1?arguments[1]:void 0;return(0,l.jsx)("div",{className:"jsx-".concat(h.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:t,collection:N,tokenId:n,chainId:H,isShow:!0})},a)}))})}),M&&q&&(0,l.jsx)(l.Fragment,{children:!re&&(0,l.jsx)(l.Fragment,{children:he.slice(0,$e+nn).map((function(e,n){var t=e.tokenId;return(0,l.jsx)("div",{className:"jsx-".concat(h.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:!(!Ue[e.collection]||!Ue[e.collection][t.toString()])&&Ue[e.collection][t.toString()],tokenInfo:e,allowedERC20Info:Ee,chainId:H,isDeList:q&&q.toLowerCase()==e.seller.toLowerCase()})},n)}))})}),!re&&(!M||!q)&&(!L||!q)&&!B&&(0,l.jsx)(l.Fragment,{children:oe.slice(0,$e+nn).map((function(e,n){var t=e.tokenId;return(0,l.jsx)("div",{className:"jsx-".concat(h.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:!(!Ue[e.collection]||!Ue[e.collection][t.toString()])&&Ue[e.collection][t.toString()],tokenInfo:e,allowedERC20Info:Ee,chainId:H,isDeList:q&&q.toLowerCase()==e.seller.toLowerCase()})},n)}))}),Me&&L&&q&&(0,l.jsx)(l.Fragment,{children:Le.slice(0,$e+nn).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tokenInfo,n=e.tokenURI,t=e.tokenId,a=arguments.length>1?arguments[1]:void 0;return(0,l.jsx)("div",{className:"jsx-".concat(h.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:n,collection:N,tokenId:t,chainId:H,isSell:L})},a)}))})]}),tn&&(0,l.jsx)("div",{style:{textAlign:"center",paddingTop:"2em"},className:"jsx-".concat(h.Z.__hash),children:(0,l.jsx)(T.Z,{onClick:function(){en($e+nn)},children:"Load more"})})]}),(0,l.jsx)(f.Z,(0,c.Z)({},e))]})}}},function(e){e.O(0,[976,697,991,100,303,193,774,888,179],(function(){return n=26377,e(e.s=n);var n}));var n=e.O();_N_E=n}]);