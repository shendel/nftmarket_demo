(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{26377:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collection",function(){return t(86851)}])},42949:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var a=t(47568),c=t(26042),s=t(69396),o=t(34051),l=t.n(o),r=t(12975),i=t(54030),d=t(78899),x=t(3283),u=t.n(x),h=t(99312),f=t(64262),p=t(81586),m=t(42304),g=function(e){var n=(0,c.Z)({forAddress:!1},e),t=n.address,a=n.forAddress,o=n.chainId;return new Promise((function(e,n){var l=(0,f.T_)(o),r=d;if(l&&l.rpcUrls)try{var i=new(new(u())(l.rpcUrls[0]).eth.Contract)(h,f.Ce[o]),x=new p.vU(r);(0,m.O)({multicall:i,target:t,encoder:x,calls:(0,s.Z)((0,c.Z)({owner:{func:"owner"}},a?{balance:{func:"balanceOf",args:[a]}}:{}),{totalSupply:{func:"totalSupply",_isBigNumber:!0},maxSupply:{func:"MAX_SUPPLY",_isBigNumber:!0},name:{func:"name"},contractURI:{func:"contractURI "},hiddenMetadataUri:{func:"hiddenMetadataUri"},baseExtension:{func:"baseExtension"},zeroTokenURI:{func:"tokenURI",args:[0]},symbol:{func:"symbol"}})}).then((function(n){e(n)})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),n(e)}))}catch(g){n(g)}else n("NOT_SUPPORTED_CHAIN")}))},v=function(e){var n=(0,c.Z)({forAddress:!1},e),t=n.address,o=n.chainId,d=n.forAddress;return new Promise((function(e,n){g({chainId:o,address:t,forAddress:d}).then(function(){var n=(0,a.Z)(l().mark((function n(t){var a,o,d,x;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=!1,o=!1,d=!1,!t.contractURI){n.next=12;break}return n.prev=4,n.next=7,(0,i.L)((0,r.W)(t.contractURI));case 7:a=n.sent,n.next=12;break;case 10:n.prev=10,n.t0=n.catch(4);case 12:if(!t.zeroTokenURI){n.next=21;break}return n.prev=13,n.next=16,(0,i.L)((0,r.W)(t.zeroTokenURI));case 16:o=n.sent,n.next=21;break;case 19:n.prev=19,n.t1=n.catch(13);case 21:if(a||o||!t.baseExtension||!t.hiddenMetadataUri){n.next=30;break}return n.prev=22,n.next=25,(0,i.L)((0,r.W)("".concat(t.hiddenMetadataUri,1).concat(t.baseExtension)));case 25:d=n.sent,n.next=30;break;case 28:n.prev=28,n.t2=n.catch(22);case 30:x=(0,s.Z)((0,c.Z)({},t),{name:(null===a||void 0===a?void 0:a.name)||(null===o||void 0===o?void 0:o.name)||t.symbol||"-",description:(null===a||void 0===a?void 0:a.description)||(null===o||void 0===o?void 0:o.description)||t.name||"-",image:(null===a||void 0===a?void 0:a.image)||(null===o||void 0===o?void 0:o.image)||(null===d||void 0===d?void 0:d.image)||!1,totalSupply:(null===t||void 0===t?void 0:t.totalSupply)||0}),e(x);case 32:case"end":return n.stop()}}),n,null,[[4,10],[13,19],[22,28]])})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(">>> Fail fetchNFTCollectionMeta >>",e),n(e)}))}))}},86851:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return B}});var a=t(14924),c=t(26042),s=t(69396),o=t(828),l=t(85893),r=t(66089),i=t.n(r),d=t(11163),x=t(67294),u=t(54153),h=t(19902),f=t(33052),p=t(42949),m=t(98901),g=t(13533),v=t(12975),j=t(4248),w=t(55111),_=t(98765),Z=t(78899),b=t(3283),k=t.n(b),S=t(99312),I=t(64262),N=t(81586),y=t(42304),E=function(e){var n=(0,c.Z)({chunkSize:500,onFetching:function(e,n){}},e),t=n.chainId,a=n.collectionAddress,s=n.chunkSize,l=n.onFetching;return new Promise((function(e,n){var c=(0,I.T_)(t),r=Z;if(c&&c.rpcUrls)try{var i=new(new(k())(c.rpcUrls[0]).eth.Contract)(S,I.Ce[t]),d=new N.vU(r);(0,y.O)({multicall:i,target:a,encoder:d,calls:{totalSupply:{func:"totalSupply"},maxSupply:{func:"MAX_SUPPLY"},maxSupply_2:{func:"maxSupply"},baseExtension:{func:"baseExtension"}}}).then((function(t){var c=0,r=0;t.totalSupply&&(c=t.totalSupply),t.maxSupply_2&&(r=t.maxSupply_2),t.maxSupply&&(r=t.maxSupply);for(var x={},u=1;u<(r||c);u++)x["".concat(u,"_tokenURI")]={func:"tokenURI",args:[u]},x["".concat(u,"_ownerOf")]={func:"ownerOf",args:[u]};(0,y.O)({multicall:i,target:a,encoder:d,calls:x,chunkSize:s,onFetching:l}).then((function(n){var a={};Object.keys(n).forEach((function(e){if(!1!==n[e]){var c=(0,o.Z)(e.split("_"),2),s=c[0],l=c[1];a[s]=a[s]||{},a[s][l]=n[e],a[s].tokenId=s,t.baseExtension&&"tokenURI"==l&&(a[s][l]="".concat(a[s][l]).concat(s).concat(t.baseExtension))}})),e(a)})).catch((function(e){n(e),console.log(">>> fetchNFTCollectionAllTokens",e)}))})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),n(e)}))}catch(x){n(x)}else n("NOT_SUPPORTED_CHAIN")}))},C=t(29223),U=t(47568),F=t(29815),T=t(34051),R=t.n(T),A=t(26566),L=function(e){return new Promise(function(){var n=(0,U.Z)(R().mark((function n(t,a){var s,o,l,r,i,d,x,u,h,f,p,m,g,v,j,w;return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=(0,c.Z)({onlyIds:!1},e),o=s.chainId,l=s.walletAddress,r=s.nftAddress,i=s.onlyIds,!(d=(0,I.T_)(o))){n.next=39;break}return x=new(k())(d.rpcUrls[0]),u=new x.eth.Contract(A,r),h=!1,f=!1,p=0,m=0,n.prev=9,n.next=12,u.methods.totalSupply().call();case 12:p=n.sent,h=!0,n.next=18;break;case 16:n.prev=16,n.t0=n.catch(9);case 18:return n.prev=18,n.next=21,u.methods.maxSupply().call();case 21:m=n.sent,f=!0,n.next=36;break;case 25:return n.prev=25,n.t1=n.catch(18),n.prev=27,n.next=30,u.methods.MAX_SUPPLY().call();case 30:m=n.sent,f=!0,n.next=36;break;case 34:n.prev=34,n.t2=n.catch(27);case 36:if(f||h){for(g=new x.eth.Contract(S,I.Ce[o]),v=new N.vU(A),j=[],w=0;w<=(m||p);w++)j=(0,F.Z)(j).concat([{group:w,func:"ownerOf",args:[w],encoder:v,target:r}],(0,F.Z)(i?[]:[{group:w,func:"tokenURI",args:[w],encoder:v,target:r}]));(0,y.L)({multicall:g,calls:j}).then((function(e){var n=Object.keys(e).map((function(n){return(0,c.Z)({tokenId:n},e[n])})).filter((function(e){return e&&e.ownerOf&&e.ownerOf.toLowerCase()==l.toLowerCase()}));t(n)})).catch((function(e){console.log(">> err",e),a(e)}))}else a("NOT SUPPORTED");n.next=40;break;case 39:a("UNKNOWN CHAIN");case 40:case"end":return n.stop()}}),n,null,[[9,16],[18,25],[27,34]])})));return function(e,t){return n.apply(this,arguments)}}())},O=t(44423),P=t(71931),M=function(){var e=(0,d.useRouter)(),n=(0,x.useState)(e.asPath.split("#")[1]||""),t=n[0],a=n[1],c=function(e){e&&a(e.split("#")[1])};return(0,x.useEffect)((function(){var n=function(){return c(window.location.hash)},t=function(e){return c(e)};return e.events.on("hashChangeStart",t),window.addEventListener("hashchange",n),window.addEventListener("load",n),function(){e.events.off("hashChangeStart",t),window.removeEventListener("load",n),window.removeEventListener("hashchange",n)}}),[e.asPath,e.events]),t},D=t(77491),W=t(84095),B=function(e){var n=e.storageData,t=(e.storageData.isBaseConfigReady,e.isOwner,(0,d.useRouter)()),r=((t.asPath.split("#")[1]||"").split("/"),(0,o.Z)((t.asPath.split("#")[1]||"").split("/"),2)),Z=r[0],b=r[1],k=(0,x.useState)(Z),S=k[0],I=k[1],N=(0,x.useState)("sell"==b),y=N[0],U=N[1],F=(0,x.useState)("my_listed"==b),T=F[0],R=F[1],A=(0,x.useState)("all"==b),B=A[0],Y=A[1],z=M();(0,x.useEffect)((function(){if(console.log(">>> HASH",z),z){var e=(0,o.Z)(z.split("/"),2),n=e[0],t=e[1];I(n),U("sell"==t),R("my_listed"==t),Y("all"==t),Ke(0)}}),[z]);var H=(0,x.useState)(null===n||void 0===n?void 0:n.marketplaceChainId),X=H[0],G=(H[1],(0,x.useState)(null===n||void 0===n?void 0:n.marketplaceContract)),K=G[0],V=(G[1],(0,C.Z)(X)),q=(V.isWalletConnecting,V.isConnected,V.address),J=(V.activeChainId,V.activeWeb3,V.connectWeb3,V.switchChainId,(0,x.useState)(!1)),Q=J[0],$=J[1];(0,x.useEffect)((function(){S&&X&&($(!1),(0,p.Z)({chainId:X,address:S,forAddress:q}).then((function(e){$(e),console.log(">>> _collectionInfo",e)})).catch((function(e){console.log(">>> fail fetch collection info",e)})))}),[S,X,q]);var ee=(0,x.useState)(!1),ne=ee[0],te=ee[1],ae=(0,x.useState)(!1),ce=(ae[0],ae[1]),se=(0,x.useState)([]),oe=se[0],le=se[1],re=(0,x.useState)(!0),ie=re[0],de=re[1],xe=(0,x.useState)([]),ue=xe[0],he=xe[1],fe=(0,x.useState)([]),pe=fe[0],me=fe[1],ge=(0,x.useState)(!1),ve=ge[0],je=ge[1],we=(0,x.useState)(!1),_e=we[0],Ze=we[1],be=(0,x.useState)(0),ke=be[0],Se=be[1],Ie=(0,x.useState)(0),Ne=Ie[0],ye=Ie[1];(0,x.useEffect)((function(){B&&S&&X&&(je(!1),Ze(!0),E({chainId:X,collectionAddress:S,onFetching:function(e,n){Se(e),ye(n)}}).then((function(e){me((0,j.Z)(e)),je(!0),Ze(!1)})).catch((function(e){Ze(!1),console.log(">>> fetchNFTCollectionAllTokens",e)})))}),[B]),(0,x.useEffect)((function(){X&&K&&(de(!0),(0,_.Z)({address:K,chainId:X,collectionAddress:S,forAddress:q}).then((function(e){console.log(">>> MARKET INFO",e),te(e),le(e.tokensAtSale),de(!1),ce(!0)})).catch((function(e){console.log(">>> fail fetch market info",e)})))}),[X,K,S,q,T]);var Ee=(0,x.useState)(!1),Ce=Ee[0],Ue=Ee[1];(0,x.useEffect)((function(){ne&&(0,g.Z)({erc20list:(0,j.Z)(ne.allowedERC20),chainId:X}).then((function(e){Ue(e)})).catch((function(e){console.log(">> fail fetch allowedERC20 token info",marketTokenInfo.erc20,e)}))}),[ne]);var Fe=(0,x.useState)({}),Te=Fe[0],Re=Fe[1];(0,x.useEffect)((function(){ne&&Q&&(!function(e){var n={chainId:ne.chainId,tokensInfo:e.map((function(e){return{address:e.collection,tokenId:e.tokenId}}))};(0,m.Z)(n).then((function(e){Re((function(n){return Object.keys(e).forEach((function(t){if(!1!==e[t]){var l=(0,o.Z)(t.split("_"),2),r=l[0],i=l[1];n=(0,s.Z)((0,c.Z)({},n),(0,a.Z)({},r,(0,s.Z)((0,c.Z)({},n[r]),(0,a.Z)({},i,e[t].tokenURI))))}})),n}))})).catch((function(e){console.log(">> err",e)}))}(oe),q&&he(oe.filter((function(e){return e.seller.toLowerCase()==q.toLowerCase()}))))}),[ne,Q,q,oe]);var Ae=(0,x.useState)([]),Le=Ae[0],Oe=Ae[1],Pe=(0,x.useState)(!1),Me=Pe[0],De=Pe[1],We=(0,x.useState)(!1),Be=We[0],Ye=We[1];(0,x.useEffect)((function(){X&&S&&q&&Q&&(De(!1),Ye(!0),L({chainId:X,walletAddress:q,nftAddress:S}).then((function(e){Oe(e),De(!0),Ye(!1),Re((function(n){return Object.keys(e).forEach((function(t){if(!1!==e[t]){var o=e[t],l=o.tokenURI,r=o.tokenId;Q.baseExtension&&l.substr(-Q.baseExtension.length)!==Q.baseExtension&&(l="".concat(l).concat(r).concat(Q.baseExtension)),n=(0,s.Z)((0,c.Z)({},n),(0,a.Z)({},S,(0,s.Z)((0,c.Z)({},n[S]),(0,a.Z)({},r,l))))}})),n}))})).catch((function(e){console.log("Fail fetch user tokens",e)})))}),[X,S,Q,q]);var ze=function(e){return(0,l.jsx)("h2",{className:"font-GoodTimes tracking-wide flex items-center text-3xl lg:text-4xl bg-clip-text text-transparent bg-gradient-to-br from-moon-gold to-indigo-100",style:{marginTop:"2em",textAlign:"center"},children:e})},He=function(e){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i(),{id:"9a61d30659bd4c87",children:".loader.jsx-9a61d30659bd4c87{padding-top:2em;padding-boolean:2em;text-align:center}.loader.jsx-9a61d30659bd4c87 IMG.jsx-9a61d30659bd4c87{display:block;margin:0 auto;width:6em}.loader.jsx-9a61d30659bd4c87 STRONG.jsx-9a61d30659bd4c87{display:block}"}),(0,l.jsxs)("div",{className:"jsx-9a61d30659bd4c87 loader",children:[(0,l.jsx)("img",{src:(0,P.V)("images/loader.svg","loader"),className:"jsx-9a61d30659bd4c87"}),(0,l.jsx)("strong",{className:"jsx-9a61d30659bd4c87",children:e})]})]})},Xe=(0,x.useState)(0),Ge=Xe[0],Ke=Xe[1],Ve=15,qe=!1;return T&&q&&Ge+Ve<ue.length&&(qe=!0),Me&&y&&q&&Ge+Ve<Le.length&&(qe=!0),ie||T&&q||y&&q||B||!(Ge+Ve<oe.length)||(qe=!0),B&&!_e&&Ge+Ve<pe.length&&(qe=!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{}),(0,l.jsx)(i(),{id:u.Z.__hash,children:u.Z}),(0,l.jsxs)("main",{className:"jsx-".concat(u.Z.__hash)+" px-6 pt-10 md:pt-12 lg:pt-16 flex flex-col items-center w-full",children:[Q&&(0,l.jsxs)("div",{className:"jsx-".concat(u.Z.__hash)+" flex flex-col items-center md:flex-row md:items-start md:gap-12 lg:gap-16 xl:gap-20",children:[(0,l.jsx)("div",{className:"jsx-".concat(u.Z.__hash),children:Q.image&&(0,l.jsx)(W.Z,{style:{objectFit:"contain",width:"300px",height:"300px"},className:"border-4 p-2 rounded-full object-cover xl:w-[320px] xl:h-[320px]",alt:"".concat(Q.name," thumbnail"),src:(0,v.W)(Q.image)})}),(0,l.jsxs)("div",{className:"jsx-".concat(u.Z.__hash)+" mt-4 md:mt-0 xl:-mt-4",children:[(0,l.jsx)("div",{className:"jsx-".concat(u.Z.__hash)+" mt-8 w-[320px] md:w-[420px] xl:w-[520px] ",children:(0,l.jsx)("h2",{className:"jsx-".concat(u.Z.__hash)+" mt-8 font-GoodTimes text-2xl md:text-3xl xl:text-4xl  bg-clip-text text-transparent bg-gradient-to-b from-indigo-100 via-moon-orange to-moon-secondary",children:Q.name})}),(0,l.jsxs)("div",{className:"jsx-".concat(u.Z.__hash)+" mt-7 xl:mt-9 grid grid-cols-2 gap-3 text-sm xl:text-base w-[320px] xl:w-[400px]",children:[(0,l.jsx)("a",{href:(0,O.R)("collection","".concat(S)),className:"jsx-".concat(u.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(u.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Listed",(0,l.jsx)("span",{className:"jsx-".concat(u.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:ne?ne.collectionListing[S]:0})]})}),q&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("a",{href:(0,O.R)("collection","".concat(S,"/my_listed")),className:"jsx-".concat(u.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(u.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Your listed",(0,l.jsx)("span",{className:"jsx-".concat(u.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:ne&&ne.userCollectionListed?ne.userCollectionListed[S]:0})]})}),(0,l.jsx)("a",{href:(0,O.R)("collection","".concat(S,"/sell")),className:"jsx-".concat(u.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(u.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Your NFTs",(0,l.jsx)("span",{className:"jsx-".concat(u.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:(null===Q||void 0===Q?void 0:Q.balance)||0})]})})]}),(0,l.jsx)("a",{href:(0,O.R)("collection","".concat(S,"/all")),className:"jsx-".concat(u.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(u.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Supply",(0,l.jsx)("span",{className:"jsx-".concat(u.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:Q.totalSupply||0})]})})]}),(0,l.jsx)("div",{className:"jsx-".concat(u.Z.__hash)+" mt-8 xl:mt-9 max-w-[320px] xl:max-w-[420px]",children:(0,l.jsx)("p",{className:"jsx-".concat(u.Z.__hash)+"  xl:text-base xl:leading-loose text-sm font-light leading-relaxed",children:Q.description})})]})]}),B&&(0,l.jsxs)(l.Fragment,{children:[ze("All NFTs from this collection"),_e&&He("Fetching ".concat(Ne>0?Math.round(ke/Ne*100):0,"%"))]}),T&&q&&(0,l.jsxs)(l.Fragment,{children:[ze("Your listed NFTs from this collection"),ie&&He("Fetching")]}),(!T||!q)&&(!y||!q)&&!B&&(0,l.jsxs)(l.Fragment,{children:[ze("NFTs listed at Marketplace"),ie&&He("Fetching")]}),y&&q&&(0,l.jsxs)(l.Fragment,{children:[ze("Your not listed NFTs"),Be&&He("Fetching")]}),(0,l.jsxs)("div",{className:"jsx-".concat(u.Z.__hash)+" mt-20 md:mt-24 flex flex-col gap-10 md:grid md:grid-cols-2 md:grid-flow-row md:gap-12 xl:grid-cols-3 xl:gap-14",children:[B&&(0,l.jsx)(l.Fragment,{children:ve&&!_e&&(0,l.jsx)(l.Fragment,{children:pe.slice(0,Ge+Ve).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tokenInfo,n=e.tokenId,t=e.tokenURI,a=arguments.length>1?arguments[1]:void 0;return(0,l.jsx)("div",{className:"jsx-".concat(u.Z.__hash),children:(0,l.jsx)(w.Z,{mediaUrl:t,collection:S,tokenId:n,chainId:X,isShow:!0})},a)}))})}),T&&q&&(0,l.jsx)(l.Fragment,{children:!ie&&(0,l.jsx)(l.Fragment,{children:ue.slice(0,Ge+Ve).map((function(e,n){var t=e.tokenId;return(0,l.jsx)("div",{className:"jsx-".concat(u.Z.__hash),children:(0,l.jsx)(w.Z,{mediaUrl:!(!Te[e.collection]||!Te[e.collection][t.toString()])&&Te[e.collection][t.toString()],tokenInfo:e,allowedERC20Info:Ce,chainId:X,isDeList:q&&q.toLowerCase()==e.seller.toLowerCase()})},n)}))})}),!ie&&(!T||!q)&&(!y||!q)&&!B&&(0,l.jsx)(l.Fragment,{children:oe.slice(0,Ge+Ve).map((function(e,n){var t=e.tokenId;return(0,l.jsx)("div",{className:"jsx-".concat(u.Z.__hash),children:(0,l.jsx)(w.Z,{mediaUrl:!(!Te[e.collection]||!Te[e.collection][t.toString()])&&Te[e.collection][t.toString()],tokenInfo:e,allowedERC20Info:Ce,chainId:X,isDeList:q&&q.toLowerCase()==e.seller.toLowerCase()})},n)}))}),Me&&y&&q&&(0,l.jsx)(l.Fragment,{children:Le.slice(0,Ge+Ve).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:tokenInfo).tokenId,n=arguments.length>1?arguments[1]:void 0;return(0,l.jsx)("div",{className:"jsx-".concat(u.Z.__hash),children:(0,l.jsx)(w.Z,{mediaUrl:!(!Te[S]||!Te[S][e.toString()])&&Te[S][e.toString()],collection:S,tokenId:e,chainId:X,isSell:y})},n)}))})]}),qe&&(0,l.jsx)("div",{style:{textAlign:"center",paddingTop:"2em"},className:"jsx-".concat(u.Z.__hash),children:(0,l.jsx)(D.Z,{onClick:function(){Ke(Ge+Ve)},children:"Load more"})})]}),(0,l.jsx)(f.Z,{})]})}}},function(e){e.O(0,[976,384,768,432,193,774,888,179],(function(){return n=26377,e(e.s=n);var n}));var n=e.O();_N_E=n}]);