(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{26377:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collection",function(){return t(58630)}])},42949:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var a=t(47568),c=t(26042),s=t(69396),o=t(34051),l=t.n(o),r=t(12975),i=t(54030),d=t(78899),u=t(3283),x=t.n(u),h=t(99312),f=t(64262),p=t(81586),m=t(42304),g=function(e){var n=(0,c.Z)({forAddress:!1},e),t=n.address,a=n.forAddress,o=n.chainId;return new Promise((function(e,n){var l=(0,f.T_)(o),r=d;if(l&&l.rpcUrls)try{var i=new(new(x())(l.rpcUrls[0]).eth.Contract)(h,f.Ce[o]),u=new p.vU(r);(0,m.O)({multicall:i,target:t,encoder:u,calls:(0,s.Z)((0,c.Z)({owner:{func:"owner"}},a?{balance:{func:"balanceOf",args:[a]}}:{}),{totalSupply:{func:"totalSupply",_isBigNumber:!0},maxSupply:{func:"MAX_SUPPLY",_isBigNumber:!0},name:{func:"name"},contractURI:{func:"contractURI "},hiddenMetadataUri:{func:"hiddenMetadataUri"},baseExtension:{func:"baseExtension"},zeroTokenURI:{func:"tokenURI",args:[0]},symbol:{func:"symbol"}})}).then((function(n){e(n)})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),n(e)}))}catch(g){n(g)}else n("NOT_SUPPORTED_CHAIN")}))},v=function(e){var n=(0,c.Z)({forAddress:!1},e),t=n.address,o=n.chainId,d=n.forAddress;return new Promise((function(e,n){g({chainId:o,address:t,forAddress:d}).then(function(){var n=(0,a.Z)(l().mark((function n(t){var a,o,d,u;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=!1,o=!1,d=!1,!t.contractURI){n.next=12;break}return n.prev=4,n.next=7,(0,i.L)((0,r.W)(t.contractURI));case 7:a=n.sent,n.next=12;break;case 10:n.prev=10,n.t0=n.catch(4);case 12:if(!t.zeroTokenURI){n.next=21;break}return n.prev=13,n.next=16,(0,i.L)((0,r.W)(t.zeroTokenURI));case 16:o=n.sent,n.next=21;break;case 19:n.prev=19,n.t1=n.catch(13);case 21:if(a||o||!t.baseExtension||!t.hiddenMetadataUri){n.next=30;break}return n.prev=22,n.next=25,(0,i.L)((0,r.W)("".concat(t.hiddenMetadataUri,1).concat(t.baseExtension)));case 25:d=n.sent,n.next=30;break;case 28:n.prev=28,n.t2=n.catch(22);case 30:u=(0,s.Z)((0,c.Z)({},t),{name:(null===a||void 0===a?void 0:a.name)||(null===o||void 0===o?void 0:o.name)||t.symbol||"-",description:(null===a||void 0===a?void 0:a.description)||(null===o||void 0===o?void 0:o.description)||t.name||"-",image:(null===a||void 0===a?void 0:a.image)||(null===o||void 0===o?void 0:o.image)||(null===d||void 0===d?void 0:d.image)||!1,totalSupply:(null===t||void 0===t?void 0:t.totalSupply)||0}),e(u);case 32:case"end":return n.stop()}}),n,null,[[4,10],[13,19],[22,28]])})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(">>> Fail fetchNFTCollectionMeta >>",e),n(e)}))}))}},76870:function(e,n,t){"use strict";var a=t(47568),c=t(26042),s=t(29815),o=t(34051),l=t.n(o),r=t(26566),i=t(64262),d=t(42304),u=t(99312),x=t(81586),h=t(3283),f=t.n(h);n.Z=function(e){return new Promise(function(){var n=(0,a.Z)(l().mark((function n(t,a){var o,h,p,m,g,v,w,_,j,Z,k,b,S,I,N,y;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(0,c.Z)({onlyIds:!1},e),h=o.chainId,p=o.walletAddress,m=o.nftAddress,g=o.onlyIds,!(v=(0,i.T_)(h))){n.next=39;break}return w=new(f())(v.rpcUrls[0]),_=new w.eth.Contract(r,m),j=!1,Z=!1,k=0,b=0,n.prev=9,n.next=12,_.methods.totalSupply().call();case 12:k=n.sent,j=!0,n.next=18;break;case 16:n.prev=16,n.t0=n.catch(9);case 18:return n.prev=18,n.next=21,_.methods.maxSupply().call();case 21:b=n.sent,Z=!0,n.next=36;break;case 25:return n.prev=25,n.t1=n.catch(18),n.prev=27,n.next=30,_.methods.MAX_SUPPLY().call();case 30:b=n.sent,Z=!0,n.next=36;break;case 34:n.prev=34,n.t2=n.catch(27);case 36:if(Z||j){for(S=new w.eth.Contract(u,i.Ce[h]),I=new x.vU(r),N=[],y=0;y<=(b||k);y++)N=(0,s.Z)(N).concat([{group:y,func:"ownerOf",args:[y],encoder:I,target:m}],(0,s.Z)(g?[]:[{group:y,func:"tokenURI",args:[y],encoder:I,target:m}]));(0,d.L)({multicall:S,calls:N}).then((function(e){var n=Object.keys(e).map((function(n){return(0,c.Z)({tokenId:n},e[n])})).filter((function(e){return e&&e.ownerOf&&e.ownerOf.toLowerCase()==p.toLowerCase()}));t(n)})).catch((function(e){console.log(">> err",e),a(e)}))}else a("NOT SUPPORTED");n.next=40;break;case 39:a("UNKNOWN CHAIN");case 40:case"end":return n.stop()}}),n,null,[[9,16],[18,25],[27,34]])})));return function(e,t){return n.apply(this,arguments)}}())}},58630:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var a=t(14924),c=t(26042),s=t(69396),o=t(828),l=t(85893),r=t(66089),i=t.n(r),d=t(11163),u=t(67294),x=t(54153),h=t(82321),f=t(33052),p=t(42949),m=t(98901),g=t(13533),v=t(12975),w=t(4248),_=t(55111),j=t(98765),Z=t(78899),k=t(3283),b=t.n(k),S=t(99312),I=t(64262),N=t(81586),y=t(42304),E=function(e){var n=(0,c.Z)({chunkSize:500,onFetching:function(e,n){}},e),t=n.chainId,a=n.collectionAddress,s=n.chunkSize,l=n.onFetching;return new Promise((function(e,n){var c=(0,I.T_)(t),r=Z;if(c&&c.rpcUrls)try{var i=new(new(b())(c.rpcUrls[0]).eth.Contract)(S,I.Ce[t]),d=new N.vU(r);(0,y.O)({multicall:i,target:a,encoder:d,calls:{totalSupply:{func:"totalSupply"},maxSupply:{func:"MAX_SUPPLY"},maxSupply_2:{func:"maxSupply"},baseExtension:{func:"baseExtension"}}}).then((function(t){var c=0,r=0;t.totalSupply&&(c=t.totalSupply),t.maxSupply_2&&(r=t.maxSupply_2),t.maxSupply&&(r=t.maxSupply);for(var u={},x=1;x<(r||c);x++)u["".concat(x,"_tokenURI")]={func:"tokenURI",args:[x]},u["".concat(x,"_ownerOf")]={func:"ownerOf",args:[x]};(0,y.O)({multicall:i,target:a,encoder:d,calls:u,chunkSize:s,onFetching:l}).then((function(n){var a={};Object.keys(n).forEach((function(e){if(!1!==n[e]){var c=(0,o.Z)(e.split("_"),2),s=c[0],l=c[1];a[s]=a[s]||{},a[s][l]=n[e],a[s].tokenId=s,t.baseExtension&&"tokenURI"==l&&(a[s][l]="".concat(a[s][l]).concat(s).concat(t.baseExtension))}})),e(a)})).catch((function(e){n(e),console.log(">>> fetchNFTCollectionAllTokens",e)}))})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),n(e)}))}catch(u){n(u)}else n("NOT_SUPPORTED_CHAIN")}))},C=t(29223),U=t(76870),F=t(44423),T=function(){var e=(0,d.useRouter)(),n=(0,u.useState)(e.asPath.split("#")[1]||""),t=n[0],a=n[1],c=function(e){e&&a(e.split("#")[1])};return(0,u.useEffect)((function(){var n=function(){return c(window.location.hash)},t=function(e){return c(e)};return e.events.on("hashChangeStart",t),window.addEventListener("hashchange",n),window.addEventListener("load",n),function(){e.events.off("hashChangeStart",t),window.removeEventListener("load",n),window.removeEventListener("hashchange",n)}}),[e.asPath,e.events]),t},R=t(77491),A=function(e){var n=e.storageData,t=(e.storageData.isBaseConfigReady,e.isOwner,(0,d.useRouter)()),r=((t.asPath.split("#")[1]||"").split("/"),(0,o.Z)((t.asPath.split("#")[1]||"").split("/"),2)),Z=r[0],k=r[1],b=(0,u.useState)(Z),S=b[0],I=b[1],N=(0,u.useState)("sell"==k),y=N[0],A=N[1],L=(0,u.useState)("my_listed"==k),O=L[0],P=L[1],D=(0,u.useState)("all"==k),M=D[0],B=D[1],W=T();(0,u.useEffect)((function(){if(console.log(">>> HASH",W),W){var e=(0,o.Z)(W.split("/"),2),n=e[0],t=e[1];I(n),A("sell"==t),P("my_listed"==t),B("all"==t),Ye(0)}}),[W]);var Y=(0,u.useState)(null===n||void 0===n?void 0:n.marketplaceChainId),z=Y[0],H=(Y[1],(0,u.useState)(null===n||void 0===n?void 0:n.marketplaceContract)),X=H[0],G=(H[1],(0,C.Z)(z)),K=(G.isWalletConnecting,G.isConnected,G.address),q=(G.activeChainId,G.activeWeb3,G.connectWeb3,G.switchChainId,(0,u.useState)(!1)),J=q[0],Q=q[1];(0,u.useEffect)((function(){S&&z&&(Q(!1),(0,p.Z)({chainId:z,address:S,forAddress:K}).then((function(e){Q(e),console.log(">>> _collectionInfo",e)})).catch((function(e){console.log(">>> fail fetch collection info",e)})))}),[S,z,K]);var V=(0,u.useState)(!1),$=V[0],ee=V[1],ne=(0,u.useState)(!1),te=(ne[0],ne[1]),ae=(0,u.useState)([]),ce=ae[0],se=ae[1],oe=(0,u.useState)(!0),le=oe[0],re=oe[1],ie=(0,u.useState)([]),de=ie[0],ue=ie[1],xe=(0,u.useState)([]),he=xe[0],fe=xe[1],pe=(0,u.useState)(!1),me=pe[0],ge=pe[1],ve=(0,u.useState)(!1),we=ve[0],_e=ve[1],je=(0,u.useState)(0),Ze=je[0],ke=je[1],be=(0,u.useState)(0),Se=be[0],Ie=be[1];(0,u.useEffect)((function(){M&&S&&z&&(ge(!1),_e(!0),E({chainId:z,collectionAddress:S,onFetching:function(e,n){ke(e),Ie(n)}}).then((function(e){fe((0,w.Z)(e)),ge(!0),_e(!1)})).catch((function(e){_e(!1),console.log(">>> fetchNFTCollectionAllTokens",e)})))}),[M]),(0,u.useEffect)((function(){z&&X&&(re(!0),(0,j.Z)({address:X,chainId:z,collectionAddress:S,forAddress:K}).then((function(e){console.log(">>> MARKET INFO",e),ee(e),se((0,w.Z)(e.tokensAtSale).sort((function(e,n){return Number(e.utx)>Number(n.utx)?-1:1}))),re(!1),te(!0)})).catch((function(e){console.log(">>> fail fetch market info",e)})))}),[z,X,S,K,O]);var Ne=(0,u.useState)(!1),ye=Ne[0],Ee=Ne[1];(0,u.useEffect)((function(){$&&(0,g.Z)({erc20list:(0,w.Z)($.allowedERC20),chainId:z}).then((function(e){Ee(e)})).catch((function(e){console.log(">> fail fetch allowedERC20 token info",marketTokenInfo.erc20,e)}))}),[$]);var Ce=(0,u.useState)({}),Ue=Ce[0],Fe=Ce[1];(0,u.useEffect)((function(){$&&J&&(!function(e){var n={chainId:$.chainId,tokensInfo:e.map((function(e){return{address:e.collection,tokenId:e.tokenId}}))};(0,m.Z)(n).then((function(e){Fe((function(n){return Object.keys(e).forEach((function(t){if(!1!==e[t]){var l=(0,o.Z)(t.split("_"),2),r=l[0],i=l[1];n=(0,s.Z)((0,c.Z)({},n),(0,a.Z)({},r,(0,s.Z)((0,c.Z)({},n[r]),(0,a.Z)({},i,e[t].tokenURI))))}})),n}))})).catch((function(e){console.log(">> err",e)}))}(ce),K&&ue(ce.filter((function(e){return e.seller.toLowerCase()==K.toLowerCase()}))))}),[$,J,K,ce]);var Te=(0,u.useState)([]),Re=Te[0],Ae=Te[1],Le=(0,u.useState)(!1),Oe=Le[0],Pe=Le[1];(0,u.useEffect)((function(){z&&S&&K&&J&&(Pe(!1),(0,U.Z)({chainId:z,walletAddress:K,nftAddress:S}).then((function(e){Ae(e),Pe(!0),Fe((function(n){return Object.keys(e).forEach((function(t){if(!1!==e[t]){var o=e[t],l=o.tokenURI,r=o.tokenId;J.baseExtension&&l.substr(-J.baseExtension.length)!==J.baseExtension&&(l="".concat(l).concat(r).concat(J.baseExtension)),n=(0,s.Z)((0,c.Z)({},n),(0,a.Z)({},S,(0,s.Z)((0,c.Z)({},n[S]),(0,a.Z)({},r,l))))}})),n}))})).catch((function(e){console.log("Fail fetch user tokens",e)})))}),[z,S,J,K]);var De,Me=function(e){return(0,l.jsx)("h2",{className:"font-GoodTimes tracking-wide flex items-center text-3xl lg:text-4xl bg-clip-text text-transparent bg-gradient-to-br from-moon-gold to-indigo-100",style:{marginTop:"2em",textAlign:"center"},children:e})},Be=(0,u.useState)(0),We=Be[0],Ye=Be[1],ze=15,He=!1;return O&&K&&We+ze<de.length&&(He=!0),Oe&&y&&K&&We+ze<Re.length&&(He=!0),le||O&&K||y&&K||M||!(We+ze<ce.length)||(He=!0),M&&!we&&We+ze<he.length&&(He=!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{}),(0,l.jsx)(i(),{id:x.Z.__hash,children:x.Z}),(0,l.jsxs)("main",{className:"jsx-".concat(x.Z.__hash)+" px-6 pt-10 md:pt-12 lg:pt-16 flex flex-col items-center w-full",children:[J&&(0,l.jsxs)("div",{className:"jsx-".concat(x.Z.__hash)+" flex flex-col items-center md:flex-row md:items-start md:gap-12 lg:gap-16 xl:gap-20",children:[(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:J.image&&(0,l.jsx)("img",{style:{objectFit:"contain",width:"300px",height:"300px"},alt:"".concat(J.name," thumbnail"),src:(0,v.W)(J.image),className:"jsx-".concat(x.Z.__hash)+" border-4 p-2 rounded-full object-cover xl:w-[320px] xl:h-[320px]"})}),(0,l.jsxs)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-4 md:mt-0 xl:-mt-4",children:[(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-8 w-[320px] md:w-[420px] xl:w-[520px] ",children:(0,l.jsx)("h2",{className:"jsx-".concat(x.Z.__hash)+" mt-8 font-GoodTimes text-2xl md:text-3xl xl:text-4xl  bg-clip-text text-transparent bg-gradient-to-b from-indigo-100 via-moon-orange to-moon-secondary",children:J.name})}),(0,l.jsxs)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-7 xl:mt-9 grid grid-cols-2 gap-3 text-sm xl:text-base w-[320px] xl:w-[400px]",children:[(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(S)),className:"jsx-".concat(x.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(x.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Listed",(0,l.jsx)("span",{className:"jsx-".concat(x.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:$?$.collectionListing[S]:0})]})}),K&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(S,"/my_listed")),className:"jsx-".concat(x.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(x.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Your listed",(0,l.jsx)("span",{className:"jsx-".concat(x.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:$&&$.userCollectionListed?$.userCollectionListed[S]:0})]})}),(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(S,"/sell")),className:"jsx-".concat(x.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(x.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Your NFTs",(0,l.jsx)("span",{className:"jsx-".concat(x.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:(null===J||void 0===J?void 0:J.balance)||0})]})})]}),(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(S,"/all")),className:"jsx-".concat(x.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(x.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Supply",(0,l.jsx)("span",{className:"jsx-".concat(x.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:J.totalSupply||0})]})})]}),(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-8 xl:mt-9 max-w-[320px] xl:max-w-[420px]",children:(0,l.jsx)("p",{className:"jsx-".concat(x.Z.__hash)+"  xl:text-base xl:leading-loose text-sm font-light leading-relaxed",children:J.description})})]})]}),M&&(0,l.jsx)(l.Fragment,{children:Me("All NFTs from this collection")}),O&&K&&(0,l.jsx)(l.Fragment,{children:Me("Your listed NFTs from this collection")}),!le&&(!O||!K)&&(!y||!K)&&!M&&(0,l.jsx)(l.Fragment,{children:Me("NFTs listed at Marketplace")}),Oe&&y&&K&&(0,l.jsx)(l.Fragment,{children:Me("Your tokens from this collection, not listed for sale.")}),M&&we&&(0,l.jsx)(l.Fragment,{children:(De="Fetching NFTs info ".concat(Se>0?Math.round(Ze/Se*100):0,"%"),(0,l.jsx)("div",{style:{paddingTop:"2em",paddingBottom:"2em"},children:(0,l.jsx)("p",{className:"collectionLoading font-GoodTimes tracking-wide flex items-center text-3xl lg:text-4xl bg-clip-text text-transparent bg-gradient-to-br from-moon-gold to-indigo-100",children:De})}))}),(0,l.jsxs)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-20 md:mt-24 flex flex-col gap-10 md:grid md:grid-cols-2 md:grid-flow-row md:gap-12 xl:grid-cols-3 xl:gap-14",children:[M&&(0,l.jsx)(l.Fragment,{children:me&&!we&&(0,l.jsx)(l.Fragment,{children:he.slice(0,We+ze).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tokenInfo,n=e.tokenId,t=e.tokenURI,a=arguments.length>1?arguments[1]:void 0;return(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:t,collection:S,tokenId:n,chainId:z,isShow:!0})},a)}))})}),O&&K&&(0,l.jsx)(l.Fragment,{children:!le&&(0,l.jsx)(l.Fragment,{children:de.slice(0,We+ze).map((function(e,n){var t=e.tokenId;return(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:!(!Ue[e.collection]||!Ue[e.collection][t.toString()])&&Ue[e.collection][t.toString()],tokenInfo:e,allowedERC20Info:ye,chainId:z,isDeList:K&&K.toLowerCase()==e.seller.toLowerCase()})},n)}))})}),!le&&(!O||!K)&&(!y||!K)&&!M&&(0,l.jsx)(l.Fragment,{children:ce.slice(0,We+ze).map((function(e,n){var t=e.tokenId;return(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:!(!Ue[e.collection]||!Ue[e.collection][t.toString()])&&Ue[e.collection][t.toString()],tokenInfo:e,allowedERC20Info:ye,chainId:z,isDeList:K&&K.toLowerCase()==e.seller.toLowerCase()})},n)}))}),Oe&&y&&K&&(0,l.jsx)(l.Fragment,{children:Re.slice(0,We+ze).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:tokenInfo).tokenId,n=arguments.length>1?arguments[1]:void 0;return(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:!(!Ue[S]||!Ue[S][e.toString()])&&Ue[S][e.toString()],collection:S,tokenId:e,chainId:z,isSell:y})},n)}))})]}),He&&(0,l.jsx)("div",{style:{textAlign:"center",paddingTop:"2em"},className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(R.Z,{onClick:function(){Ye(We+ze)},children:"Load more"})})]}),(0,l.jsx)(f.Z,{})]})}}},function(e){e.O(0,[976,852,603,369,850,269,147,774,888,179],(function(){return n=26377,e(e.s=n);var n}));var n=e.O();_N_E=n}]);