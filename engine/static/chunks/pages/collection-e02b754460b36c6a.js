(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{26377:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collection",function(){return t(58630)}])},42949:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var a=t(47568),c=t(26042),o=t(69396),s=t(34051),l=t.n(s),r=t(12975),i=t(54030),d=t(78899),u=t(3283),x=t.n(u),h=t(99312),f=t(64262),p=t(81586),m=t(42304),g=function(e){var n=(0,c.Z)({forAddress:!1},e),t=n.address,a=n.forAddress,s=n.chainId;return new Promise((function(e,n){var l=(0,f.T_)(s),r=d;if(l&&l.rpcUrls)try{var i=new(new(x())(l.rpcUrls[0]).eth.Contract)(h,f.Ce[s]),u=new p.vU(r);(0,m.O)({multicall:i,target:t,encoder:u,calls:(0,o.Z)((0,c.Z)({owner:{func:"owner"}},a?{balance:{func:"balanceOf",args:[a]}}:{}),{totalSupply:{func:"totalSupply",_isBigNumber:!0},maxSupply:{func:"MAX_SUPPLY",_isBigNumber:!0},name:{func:"name"},contractURI:{func:"contractURI "},hiddenMetadataUri:{func:"hiddenMetadataUri"},baseExtension:{func:"baseExtension"},zeroTokenURI:{func:"tokenURI",args:[0]},symbol:{func:"symbol"}})}).then((function(n){e(n)})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),n(e)}))}catch(g){n(g)}else n("NOT_SUPPORTED_CHAIN")}))},v=function(e){var n=(0,c.Z)({forAddress:!1},e),t=n.address,s=n.chainId,d=n.forAddress;return new Promise((function(e,n){g({chainId:s,address:t,forAddress:d}).then(function(){var n=(0,a.Z)(l().mark((function n(t){var a,s,d,u;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=!1,s=!1,d=!1,!t.contractURI){n.next=12;break}return n.prev=4,n.next=7,(0,i.L)((0,r.W)(t.contractURI));case 7:a=n.sent,n.next=12;break;case 10:n.prev=10,n.t0=n.catch(4);case 12:if(!t.zeroTokenURI){n.next=21;break}return n.prev=13,n.next=16,(0,i.L)((0,r.W)(t.zeroTokenURI));case 16:s=n.sent,n.next=21;break;case 19:n.prev=19,n.t1=n.catch(13);case 21:if(a||s||!t.baseExtension||!t.hiddenMetadataUri){n.next=30;break}return n.prev=22,n.next=25,(0,i.L)((0,r.W)("".concat(t.hiddenMetadataUri,1).concat(t.baseExtension)));case 25:d=n.sent,n.next=30;break;case 28:n.prev=28,n.t2=n.catch(22);case 30:u=(0,o.Z)((0,c.Z)({},t),{name:(null===a||void 0===a?void 0:a.name)||(null===s||void 0===s?void 0:s.name)||t.symbol||"-",description:(null===a||void 0===a?void 0:a.description)||(null===s||void 0===s?void 0:s.description)||t.name||"-",image:(null===a||void 0===a?void 0:a.image)||(null===s||void 0===s?void 0:s.image)||(null===d||void 0===d?void 0:d.image)||!1,totalSupply:(null===t||void 0===t?void 0:t.totalSupply)||0}),e(u);case 32:case"end":return n.stop()}}),n,null,[[4,10],[13,19],[22,28]])})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(">>> Fail fetchNFTCollectionMeta >>",e),n(e)}))}))}},76870:function(e,n,t){"use strict";var a=t(47568),c=t(26042),o=t(29815),s=t(34051),l=t.n(s),r=t(26566),i=t(64262),d=t(42304),u=t(99312),x=t(81586),h=t(3283),f=t.n(h);n.Z=function(e){return new Promise(function(){var n=(0,a.Z)(l().mark((function n(t,a){var s,h,p,m,g,v,w,_,j,Z,k,b,S,I,N,y;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=(0,c.Z)({onlyIds:!1},e),h=s.chainId,p=s.walletAddress,m=s.nftAddress,g=s.onlyIds,!(v=(0,i.T_)(h))){n.next=39;break}return w=new(f())(v.rpcUrls[0]),_=new w.eth.Contract(r,m),j=!1,Z=!1,k=0,b=0,n.prev=9,n.next=12,_.methods.totalSupply().call();case 12:k=n.sent,j=!0,n.next=18;break;case 16:n.prev=16,n.t0=n.catch(9);case 18:return n.prev=18,n.next=21,_.methods.maxSupply().call();case 21:b=n.sent,Z=!0,n.next=36;break;case 25:return n.prev=25,n.t1=n.catch(18),n.prev=27,n.next=30,_.methods.MAX_SUPPLY().call();case 30:b=n.sent,Z=!0,n.next=36;break;case 34:n.prev=34,n.t2=n.catch(27);case 36:if(Z||j){for(S=new w.eth.Contract(u,i.Ce[h]),I=new x.vU(r),N=[],y=0;y<=(b||k);y++)N=(0,o.Z)(N).concat([{group:y,func:"ownerOf",args:[y],encoder:I,target:m}],(0,o.Z)(g?[]:[{group:y,func:"tokenURI",args:[y],encoder:I,target:m}]));(0,d.L)({multicall:S,calls:N}).then((function(e){var n=Object.keys(e).map((function(n){return(0,c.Z)({tokenId:n},e[n])})).filter((function(e){return e&&e.ownerOf&&e.ownerOf.toLowerCase()==p.toLowerCase()}));t(n)})).catch((function(e){console.log(">> err",e),a(e)}))}else a("NOT SUPPORTED");n.next=40;break;case 39:a("UNKNOWN CHAIN");case 40:case"end":return n.stop()}}),n,null,[[9,16],[18,25],[27,34]])})));return function(e,t){return n.apply(this,arguments)}}())}},58630:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var a=t(14924),c=t(26042),o=t(69396),s=t(828),l=t(85893),r=t(66089),i=t.n(r),d=t(11163),u=t(67294),x=t(54153),h=t(19902),f=t(33052),p=t(42949),m=t(98901),g=t(13533),v=t(12975),w=t(4248),_=t(55111),j=t(98765),Z=t(78899),k=t(3283),b=t.n(k),S=t(99312),I=t(64262),N=t(81586),y=t(42304),E=function(e){var n=(0,c.Z)({chunkSize:500,onFetching:function(e,n){}},e),t=n.chainId,a=n.collectionAddress,o=n.chunkSize,l=n.onFetching;return new Promise((function(e,n){var c=(0,I.T_)(t),r=Z;if(c&&c.rpcUrls)try{var i=new(new(b())(c.rpcUrls[0]).eth.Contract)(S,I.Ce[t]),d=new N.vU(r);(0,y.O)({multicall:i,target:a,encoder:d,calls:{totalSupply:{func:"totalSupply"},maxSupply:{func:"MAX_SUPPLY"},maxSupply_2:{func:"maxSupply"},baseExtension:{func:"baseExtension"}}}).then((function(t){var c=0,r=0;t.totalSupply&&(c=t.totalSupply),t.maxSupply_2&&(r=t.maxSupply_2),t.maxSupply&&(r=t.maxSupply);for(var u={},x=1;x<(r||c);x++)u["".concat(x,"_tokenURI")]={func:"tokenURI",args:[x]},u["".concat(x,"_ownerOf")]={func:"ownerOf",args:[x]};(0,y.O)({multicall:i,target:a,encoder:d,calls:u,chunkSize:o,onFetching:l}).then((function(n){var a={};Object.keys(n).forEach((function(e){if(!1!==n[e]){var c=(0,s.Z)(e.split("_"),2),o=c[0],l=c[1];a[o]=a[o]||{},a[o][l]=n[e],a[o].tokenId=o,t.baseExtension&&"tokenURI"==l&&(a[o][l]="".concat(a[o][l]).concat(o).concat(t.baseExtension))}})),e(a)})).catch((function(e){n(e),console.log(">>> fetchNFTCollectionAllTokens",e)}))})).catch((function(e){console.log(">>> Fail fetch all NFT info",e),n(e)}))}catch(u){n(u)}else n("NOT_SUPPORTED_CHAIN")}))},C=t(29223),U=t(76870),F=t(44423),T=function(){var e=(0,d.useRouter)(),n=(0,u.useState)(e.asPath.split("#")[1]||""),t=n[0],a=n[1],c=function(e){e&&a(e.split("#")[1])};return(0,u.useEffect)((function(){var n=function(){return c(window.location.hash)},t=function(e){return c(e)};return e.events.on("hashChangeStart",t),window.addEventListener("hashchange",n),window.addEventListener("load",n),function(){e.events.off("hashChangeStart",t),window.removeEventListener("load",n),window.removeEventListener("hashchange",n)}}),[e.asPath,e.events]),t},R=t(77491),A=t(84095),L=function(e){var n=e.storageData,t=(e.storageData.isBaseConfigReady,e.isOwner,(0,d.useRouter)()),r=((t.asPath.split("#")[1]||"").split("/"),(0,s.Z)((t.asPath.split("#")[1]||"").split("/"),2)),Z=r[0],k=r[1],b=(0,u.useState)(Z),S=b[0],I=b[1],N=(0,u.useState)("sell"==k),y=N[0],L=N[1],O=(0,u.useState)("my_listed"==k),P=O[0],D=O[1],M=(0,u.useState)("all"==k),B=M[0],W=M[1],Y=T();(0,u.useEffect)((function(){if(console.log(">>> HASH",Y),Y){var e=(0,s.Z)(Y.split("/"),2),n=e[0],t=e[1];I(n),L("sell"==t),D("my_listed"==t),W("all"==t),ze(0)}}),[Y]);var z=(0,u.useState)(null===n||void 0===n?void 0:n.marketplaceChainId),H=z[0],X=(z[1],(0,u.useState)(null===n||void 0===n?void 0:n.marketplaceContract)),G=X[0],K=(X[1],(0,C.Z)(H)),q=(K.isWalletConnecting,K.isConnected,K.address),J=(K.activeChainId,K.activeWeb3,K.connectWeb3,K.switchChainId,(0,u.useState)(!1)),Q=J[0],V=J[1];(0,u.useEffect)((function(){S&&H&&(V(!1),(0,p.Z)({chainId:H,address:S,forAddress:q}).then((function(e){V(e),console.log(">>> _collectionInfo",e)})).catch((function(e){console.log(">>> fail fetch collection info",e)})))}),[S,H,q]);var $=(0,u.useState)(!1),ee=$[0],ne=$[1],te=(0,u.useState)(!1),ae=(te[0],te[1]),ce=(0,u.useState)([]),oe=ce[0],se=ce[1],le=(0,u.useState)(!0),re=le[0],ie=le[1],de=(0,u.useState)([]),ue=de[0],xe=de[1],he=(0,u.useState)([]),fe=he[0],pe=he[1],me=(0,u.useState)(!1),ge=me[0],ve=me[1],we=(0,u.useState)(!1),_e=we[0],je=we[1],Ze=(0,u.useState)(0),ke=Ze[0],be=Ze[1],Se=(0,u.useState)(0),Ie=Se[0],Ne=Se[1];(0,u.useEffect)((function(){B&&S&&H&&(ve(!1),je(!0),E({chainId:H,collectionAddress:S,onFetching:function(e,n){be(e),Ne(n)}}).then((function(e){pe((0,w.Z)(e)),ve(!0),je(!1)})).catch((function(e){je(!1),console.log(">>> fetchNFTCollectionAllTokens",e)})))}),[B]),(0,u.useEffect)((function(){H&&G&&(ie(!0),(0,j.Z)({address:G,chainId:H,collectionAddress:S,forAddress:q}).then((function(e){console.log(">>> MARKET INFO",e),ne(e),se((0,w.Z)(e.tokensAtSale).sort((function(e,n){return Number(e.utx)>Number(n.utx)?-1:1}))),ie(!1),ae(!0)})).catch((function(e){console.log(">>> fail fetch market info",e)})))}),[H,G,S,q,P]);var ye=(0,u.useState)(!1),Ee=ye[0],Ce=ye[1];(0,u.useEffect)((function(){ee&&(0,g.Z)({erc20list:(0,w.Z)(ee.allowedERC20),chainId:H}).then((function(e){Ce(e)})).catch((function(e){console.log(">> fail fetch allowedERC20 token info",marketTokenInfo.erc20,e)}))}),[ee]);var Ue=(0,u.useState)({}),Fe=Ue[0],Te=Ue[1];(0,u.useEffect)((function(){ee&&Q&&(!function(e){var n={chainId:ee.chainId,tokensInfo:e.map((function(e){return{address:e.collection,tokenId:e.tokenId}}))};(0,m.Z)(n).then((function(e){Te((function(n){return Object.keys(e).forEach((function(t){if(!1!==e[t]){var l=(0,s.Z)(t.split("_"),2),r=l[0],i=l[1];n=(0,o.Z)((0,c.Z)({},n),(0,a.Z)({},r,(0,o.Z)((0,c.Z)({},n[r]),(0,a.Z)({},i,e[t].tokenURI))))}})),n}))})).catch((function(e){console.log(">> err",e)}))}(oe),q&&xe(oe.filter((function(e){return e.seller.toLowerCase()==q.toLowerCase()}))))}),[ee,Q,q,oe]);var Re=(0,u.useState)([]),Ae=Re[0],Le=Re[1],Oe=(0,u.useState)(!1),Pe=Oe[0],De=Oe[1];(0,u.useEffect)((function(){H&&S&&q&&Q&&(De(!1),(0,U.Z)({chainId:H,walletAddress:q,nftAddress:S}).then((function(e){Le(e),De(!0),Te((function(n){return Object.keys(e).forEach((function(t){if(!1!==e[t]){var s=e[t],l=s.tokenURI,r=s.tokenId;Q.baseExtension&&l.substr(-Q.baseExtension.length)!==Q.baseExtension&&(l="".concat(l).concat(r).concat(Q.baseExtension)),n=(0,o.Z)((0,c.Z)({},n),(0,a.Z)({},S,(0,o.Z)((0,c.Z)({},n[S]),(0,a.Z)({},r,l))))}})),n}))})).catch((function(e){console.log("Fail fetch user tokens",e)})))}),[H,S,Q,q]);var Me,Be=function(e){return(0,l.jsx)("h2",{className:"font-GoodTimes tracking-wide flex items-center text-3xl lg:text-4xl bg-clip-text text-transparent bg-gradient-to-br from-moon-gold to-indigo-100",style:{marginTop:"2em",textAlign:"center"},children:e})},We=(0,u.useState)(0),Ye=We[0],ze=We[1],He=15,Xe=!1;return P&&q&&Ye+He<ue.length&&(Xe=!0),Pe&&y&&q&&Ye+He<Ae.length&&(Xe=!0),re||P&&q||y&&q||B||!(Ye+He<oe.length)||(Xe=!0),B&&!_e&&Ye+He<fe.length&&(Xe=!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{}),(0,l.jsx)(i(),{id:x.Z.__hash,children:x.Z}),(0,l.jsxs)("main",{className:"jsx-".concat(x.Z.__hash)+" px-6 pt-10 md:pt-12 lg:pt-16 flex flex-col items-center w-full",children:[Q&&(0,l.jsxs)("div",{className:"jsx-".concat(x.Z.__hash)+" flex flex-col items-center md:flex-row md:items-start md:gap-12 lg:gap-16 xl:gap-20",children:[(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:Q.image&&(0,l.jsx)(A.Z,{style:{objectFit:"contain",width:"300px",height:"300px"},className:"border-4 p-2 rounded-full object-cover xl:w-[320px] xl:h-[320px]",alt:"".concat(Q.name," thumbnail"),src:(0,v.W)(Q.image)})}),(0,l.jsxs)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-4 md:mt-0 xl:-mt-4",children:[(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-8 w-[320px] md:w-[420px] xl:w-[520px] ",children:(0,l.jsx)("h2",{className:"jsx-".concat(x.Z.__hash)+" mt-8 font-GoodTimes text-2xl md:text-3xl xl:text-4xl  bg-clip-text text-transparent bg-gradient-to-b from-indigo-100 via-moon-orange to-moon-secondary",children:Q.name})}),(0,l.jsxs)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-7 xl:mt-9 grid grid-cols-2 gap-3 text-sm xl:text-base w-[320px] xl:w-[400px]",children:[(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(S)),className:"jsx-".concat(x.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(x.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Listed",(0,l.jsx)("span",{className:"jsx-".concat(x.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:ee?ee.collectionListing[S]:0})]})}),q&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(S,"/my_listed")),className:"jsx-".concat(x.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(x.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Your listed",(0,l.jsx)("span",{className:"jsx-".concat(x.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:ee&&ee.userCollectionListed?ee.userCollectionListed[S]:0})]})}),(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(S,"/sell")),className:"jsx-".concat(x.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(x.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Your NFTs",(0,l.jsx)("span",{className:"jsx-".concat(x.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:(null===Q||void 0===Q?void 0:Q.balance)||0})]})})]}),(0,l.jsx)("a",{href:(0,F.R)("collection","".concat(S,"/all")),className:"jsx-".concat(x.Z.__hash),children:(0,l.jsxs)("p",{className:"jsx-".concat(x.Z.__hash)+" w-[149px] xl:w-[189px] rounded-[3px] bg-[#301B3D] py-[6px] xl:py-2 px-[10px] xl:px-3 flex items-center justify-between",children:["Supply",(0,l.jsx)("span",{className:"jsx-".concat(x.Z.__hash)+" max-w-[60px] truncate xl:max-w-[90px]",children:Q.totalSupply||0})]})})]}),(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-8 xl:mt-9 max-w-[320px] xl:max-w-[420px]",children:(0,l.jsx)("p",{className:"jsx-".concat(x.Z.__hash)+"  xl:text-base xl:leading-loose text-sm font-light leading-relaxed",children:Q.description})})]})]}),B&&(0,l.jsx)(l.Fragment,{children:Be("All NFTs from this collection")}),P&&q&&(0,l.jsx)(l.Fragment,{children:Be("Your listed NFTs from this collection")}),!re&&(!P||!q)&&(!y||!q)&&!B&&(0,l.jsx)(l.Fragment,{children:Be("NFTs listed at Marketplace")}),Pe&&y&&q&&(0,l.jsx)(l.Fragment,{children:Be("Your tokens from this collection, not listed for sale.")}),B&&_e&&(0,l.jsx)(l.Fragment,{children:(Me="Fetching NFTs info ".concat(Ie>0?Math.round(ke/Ie*100):0,"%"),(0,l.jsx)("div",{style:{paddingTop:"2em",paddingBottom:"2em"},children:(0,l.jsx)("p",{className:"collectionLoading font-GoodTimes tracking-wide flex items-center text-3xl lg:text-4xl bg-clip-text text-transparent bg-gradient-to-br from-moon-gold to-indigo-100",children:Me})}))}),(0,l.jsxs)("div",{className:"jsx-".concat(x.Z.__hash)+" mt-20 md:mt-24 flex flex-col gap-10 md:grid md:grid-cols-2 md:grid-flow-row md:gap-12 xl:grid-cols-3 xl:gap-14",children:[B&&(0,l.jsx)(l.Fragment,{children:ge&&!_e&&(0,l.jsx)(l.Fragment,{children:fe.slice(0,Ye+He).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tokenInfo,n=e.tokenId,t=e.tokenURI,a=arguments.length>1?arguments[1]:void 0;return(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:t,collection:S,tokenId:n,chainId:H,isShow:!0})},a)}))})}),P&&q&&(0,l.jsx)(l.Fragment,{children:!re&&(0,l.jsx)(l.Fragment,{children:ue.slice(0,Ye+He).map((function(e,n){var t=e.tokenId;return(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:!(!Fe[e.collection]||!Fe[e.collection][t.toString()])&&Fe[e.collection][t.toString()],tokenInfo:e,allowedERC20Info:Ee,chainId:H,isDeList:q&&q.toLowerCase()==e.seller.toLowerCase()})},n)}))})}),!re&&(!P||!q)&&(!y||!q)&&!B&&(0,l.jsx)(l.Fragment,{children:oe.slice(0,Ye+He).map((function(e,n){var t=e.tokenId;return(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:!(!Fe[e.collection]||!Fe[e.collection][t.toString()])&&Fe[e.collection][t.toString()],tokenInfo:e,allowedERC20Info:Ee,chainId:H,isDeList:q&&q.toLowerCase()==e.seller.toLowerCase()})},n)}))}),Pe&&y&&q&&(0,l.jsx)(l.Fragment,{children:Ae.slice(0,Ye+He).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:tokenInfo).tokenId,n=arguments.length>1?arguments[1]:void 0;return(0,l.jsx)("div",{className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(_.Z,{mediaUrl:!(!Fe[S]||!Fe[S][e.toString()])&&Fe[S][e.toString()],collection:S,tokenId:e,chainId:H,isSell:y})},n)}))})]}),Xe&&(0,l.jsx)("div",{style:{textAlign:"center",paddingTop:"2em"},className:"jsx-".concat(x.Z.__hash),children:(0,l.jsx)(R.Z,{onClick:function(){ze(Ye+He)},children:"Load more"})})]}),(0,l.jsx)(f.Z,{})]})}}},function(e){e.O(0,[976,483,603,485,432,193,774,888,179],(function(){return n=26377,e(e.s=n);var n}));var n=e.O();_N_E=n}]);